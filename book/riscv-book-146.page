<div id="pf92" class="pf w0 h0" data-page-no="92"><div class="pc pc92 w0 h0"><div class="t m0 xf hd ye2 ff6 fs8 fc0 sc0 ls0 ws0">Chapter<span class="_ _1f"> </span>10</div><div class="t m0 xf ha ye3 ff6 fs5 fc0 sc0 ls0 ws0">Soft<span class="_ _9"></span>w<span class="_ _9"></span>are<span class="_ _14"> </span>in<span class="_ _9"></span>terrupts<span class="_ _25"> </span>and<span class="_ _14"> </span>exceptions</div><div class="t m0 xf h8 y8c8 ff3 fs4 fc0 sc0 ls0 ws0">As<span class="_ _2"> </span>discussed<span class="_ _2"> </span>previously<span class="_ _9"></span>,<span class="_ _2"> </span>many<span class="_ _6"> </span>computer<span class="_ _2"> </span>systems<span class="_ _2"> </span>are<span class="_ _2"> </span>organized<span class="_ _2"> </span>so<span class="_ _2"> </span>that<span class="_ _3"> </span>the<span class="_ _2"> </span>soft<span class="_ _1"></span>w<span class="_ _1"></span>are<span class="_ _2"> </span>is<span class="_ _2"> </span>divided<span class="_ _2"> </span>into<span class="_ _6"> </span>user</div><div class="t m0 xf h8 yabb ff3 fs4 fc0 sc0 ls0 ws0">and<span class="_ _2"> </span>system<span class="_ _3"> </span>softw<span class="_ _27"></span>are.<span class="_ _4"> </span>The<span class="_ _2"> </span>system<span class="_ _3"> </span>softw<span class="_ _27"></span>are<span class="_ _3"> </span>(<span class="ff8">e.g.</span>,<span class="_ _3"> </span>the<span class="_ _3"> </span>operating<span class="_ _3"> </span>system<span class="_ _3"> </span>kernel<span class="_ _2"> </span>and<span class="_ _3"> </span>device<span class="_ _2"> </span>drivers)<span class="_ _2"> </span>is<span class="_ _3"> </span>the</div><div class="t m0 xf h8 yabc ff3 fs4 fc0 sc0 ls0 ws0">soft<span class="_ _1"></span>w<span class="_ _1"></span>are<span class="_ _a"> </span>resp<span class="_ _5"></span>onsible<span class="_ _a"> </span>for<span class="_ _a"> </span>protecting<span class="_ _a"> </span>and<span class="_ _a"> </span>managing<span class="_ _a"> </span>the<span class="_ _a"> </span>whole<span class="_ _a"> </span>system, including<span class="_ _35"> </span>in<span class="_ _1"></span>teracting<span class="_ _a"> </span>with<span class="_ _a"> </span>p<span class="_ _5"></span>eripherals</div><div class="t m0 xf h8 yabd ff3 fs4 fc0 sc0 ls0 ws0">to p<span class="_ _5"></span>erform<span class="_ _6"> </span>input and<span class="_ _6"> </span>output op<span class="_ _5"></span>erations<span class="_ _6"> </span>and loading<span class="_ _6"> </span>and<span class="_ _38"> </span>scheduling user<span class="_ _38"> </span>applications<span class="_ _6"> </span>for<span class="_ _38"> </span>execution.<span class="_ _7"> </span>The</div><div class="t m0 xf h8 yabe ff3 fs4 fc0 sc0 ls0 ws0">user<span class="_ _2"> </span>softw<span class="_ _27"></span>are<span class="_ _3"> </span>is<span class="_ _3"> </span>usually<span class="_ _3"> </span>limited<span class="_ _2"> </span>to<span class="_ _3"> </span>p<span class="_ _5"></span>erforming<span class="_ _3"> </span>op<span class="_ _5"></span>erations<span class="_ _2"> </span>with<span class="_ _3"> </span>data<span class="_ _3"> </span>that<span class="_ _3"> </span>is<span class="_ _2"> </span>lo<span class="_ _5"></span>cated<span class="_ _3"> </span>on<span class="_ _3"> </span>registers<span class="_ _3"> </span>and<span class="_ _2"> </span>the</div><div class="t m0 xf h8 yabf ff3 fs4 fc0 sc0 ls0 ws0">main<span class="_ _2"> </span>memory<span class="_ _9"></span>.<span class="_ _7"> </span>Whenever<span class="_ _6"> </span>the<span class="_ _2"> </span>user<span class="_ _2"> </span>softw<span class="_ _27"></span>are<span class="_ _2"> </span>needs<span class="_ _2"> </span>to<span class="_ _3"> </span>p<span class="_ _5"></span>erform<span class="_ _2"> </span>a<span class="_ _2"> </span>pro<span class="_ _5"></span>cedure<span class="_ _2"> </span>that<span class="_ _2"> </span>requires<span class="_ _2"> </span>interacting<span class="_ _6"> </span>with</div><div class="t m0 xf h8 yac0 ff3 fs4 fc0 sc0 ls0 ws0">other<span class="_ _34"> </span>parts<span class="_ _7"> </span>of<span class="_ _7"> </span>the<span class="_ _7"> </span>system,<span class="_ _24"> </span>such<span class="_ _34"> </span>as<span class="_ _34"> </span>reading<span class="_ _7"> </span>data<span class="_ _7"> </span>from<span class="_ _7"> </span>a<span class="_ _7"> </span>ﬁle<span class="_ _7"> </span>or<span class="_ _7"> </span>showing<span class="_ _b"> </span>information<span class="_ _7"> </span>on<span class="_ _7"> </span>the<span class="_ _7"> </span>computer</div><div class="t m0 xf h8 yac1 ff3 fs4 fc0 sc0 ls0 ws0">displa<span class="_ _1"></span>y<span class="_ _9"></span>,<span class="_ _2"> </span>it<span class="_ _6"> </span>inv<span class="_ _1"></span>ok<span class="_ _1"></span>es<span class="_ _6"> </span>the<span class="_ _2"> </span>system<span class="_ _2"> </span>softw<span class="_ _27"></span>are<span class="_ _2"> </span>to<span class="_ _2"> </span>p<span class="_ _5"></span>erform<span class="_ _2"> </span>the<span class="_ _2"> </span>pro<span class="_ _5"></span>cedure<span class="_ _2"> </span>on<span class="_ _2"> </span>its<span class="_ _2"> </span>b<span class="_ _5"></span>ehalf.</div><div class="t m0 xc h8 y1215 ff3 fs4 fc0 sc0 ls0 ws0">This<span class="_ _b"> </span>chapter<span class="_ _b"> </span>discusses<span class="_ _b"> </span>the<span class="_ _b"> </span>hardware<span class="_ _b"> </span>mechanisms<span class="_ _b"> </span>that<span class="_ _b"> </span>protect<span class="_ _b"> </span>the<span class="_ _34"> </span>system<span class="_ _b"> </span>from<span class="_ _34"> </span>faulty<span class="_ _3"> </span>or<span class="_ _34"> </span>malicious</div><div class="t m0 xf h8 y1216 ff3 fs4 fc0 sc0 ls0 ws0">user<span class="_ _2"> </span>programs<span class="_ _2"> </span>and<span class="_ _6"> </span>how<span class="_ _6"> </span>to<span class="_ _2"> </span>program<span class="_ _2"> </span>these<span class="_ _2"> </span>mechanisms.</div><div class="t m0 xf he y1511 ff6 fs3 fc0 sc0 ls0 ws0">10.1<span class="_ _37"> </span>Privilege<span class="_ _4"> </span>lev<span class="_ _27"></span>els</div><div class="t m0 xf h8 y1512 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _3"> </span>Instruction<span class="_ _b"> </span>Set<span class="_ _b"> </span>Architecture<span class="_ _3"> </span>deﬁnes<span class="_ _3"> </span>the<span class="_ _b"> </span>set<span class="_ _b"> </span>of<span class="_ _b"> </span>resources<span class="_ _3"> </span>that<span class="_ _b"> </span>the<span class="_ _b"> </span>soft<span class="_ _1"></span>w<span class="_ _1"></span>are<span class="_ _3"> </span>can<span class="_ _b"> </span>use<span class="_ _b"> </span>to<span class="_ _b"> </span>perform<span class="_ _b"> </span>the</div><div class="t m0 xf h8 y1513 ff3 fs4 fc0 sc0 ls0 ws0">in<span class="_ _1"></span>tended<span class="_ _34"> </span>computation.<span class="_ _1f"> </span>F<span class="_ _9"></span>or<span class="_ _7"> </span>example,<span class="_ _24"> </span>it<span class="_ _34"> </span>deﬁnes<span class="_ _7"> </span>the<span class="_ _7"> </span>set<span class="_ _34"> </span>of<span class="_ _7"> </span>instructions,<span class="_ _24"> </span>their<span class="_ _7"> </span>b<span class="_ _5"></span>ehavior,<span class="_ _34"> </span>and<span class="_ _7"> </span>op<span class="_ _5"></span>erands,</div><div class="t m0 xf h8 y1514 ff3 fs4 fc0 sc0 ls0 ws0">including<span class="_ _2"> </span>the<span class="_ _6"> </span>s<span class="_ _5"></span>et<span class="_ _6"> </span>of<span class="_ _2"> </span>registers.</div><div class="t m0 xc h8 y121b ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _2"> </span><span class="ff7">privilege<span class="_ _34"> </span>level </span>deﬁnes<span class="_ _3"> </span>which<span class="_ _6"> </span>ISA<span class="_ _3"> </span>resources<span class="_ _3"> </span>(registers,<span class="_ _3"> </span>instructions,<span class="_ _3"> </span><span class="ff8">etc</span>.)<span class="_ _18"> </span>are<span class="_ _3"> </span>accessible<span class="_ _2"> </span>by<span class="_ _2"> </span>the</div><div class="t m0 xf h8 y1515 ff3 fs4 fc0 sc0 ls0 ws0">soft<span class="_ _1"></span>w<span class="_ _1"></span>are.<span class="_ _34"> </span>They<span class="_ _6"> </span>can<span class="_ _6"> </span>b<span class="_ _5"></span>e<span class="_ _6"> </span>used<span class="_ _6"> </span>to<span class="_ _6"> </span>restrict<span class="_ _6"> </span>the<span class="_ _38"> </span>softw<span class="_ _1"></span>are<span class="_ _38"> </span>execution<span class="_ _6"> </span>and<span class="_ _6"> </span>protect<span class="_ _6"> </span>the<span class="_ _6"> </span>system<span class="_ _6"> </span>from<span class="_ _6"> </span>softw<span class="_ _27"></span>are<span class="_ _6"> </span>that</div><div class="t m0 xf h8 y121d ff3 fs4 fc0 sc0 ls0 ws0">attempts<span class="_ _a"> </span>to perform<span class="_ _a"> </span>op<span class="_ _5"></span>erations not<span class="_ _35"> </span>p<span class="_ _5"></span>ermitted.<span class="_ _34"> </span>F<span class="_ _9"></span>or example,<span class="_ _a"> </span>the system<span class="_ _35"> </span>can be conﬁgured<span class="_ _35"> </span>to execute<span class="_ _a"> </span>user</div><div class="t m0 xf h8 y121e ff3 fs4 fc0 sc0 ls0 ws0">applications<span class="_ _b"> </span>with<span class="_ _b"> </span>restricted<span class="_ _b"> </span>privilege<span class="_ _34"> </span>levels<span class="_ _3"> </span>to<span class="_ _b"> </span>preven<span class="_ _27"></span>t<span class="_ _34"> </span>them<span class="_ _b"> </span>from<span class="_ _b"> </span>directly<span class="_ _b"> </span>interacting<span class="_ _b"> </span>with<span class="_ _b"> </span>p<span class="_ _5"></span>eripherals</div><div class="t m0 xf h8 y121f ff3 fs4 fc0 sc0 ls0 ws0">or<span class="_ _34"> </span>accessing<span class="_ _7"> </span>sp<span class="_ _5"></span>ecial<span class="_ _7"> </span>micropro<span class="_ _5"></span>cessor<span class="_ _34"> </span>registers.<span class="_ _1f"> </span>The<span class="_ _34"> </span>RISC-V<span class="_ _7"> </span>Instruction<span class="_ _7"> </span>Set<span class="_ _7"> </span>Arc<span class="_ _1"></span>hitecture<span class="_ _34"> </span>deﬁnes<span class="_ _7"> </span>three</div><div class="t m0 xf h8 y1220 ff3 fs4 fc0 sc0 ls0 ws0">privilege<span class="_ _2"> </span>lev<span class="_ _1"></span>els:</div><div class="t m0 xc h7 y1516 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _18"> </span><span class="ff3">U:<span class="_ _2"> </span>User/Application;</span></div><div class="t m0 xc h7 y1517 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _18"> </span><span class="ff3">S:<span class="_ _2"> </span>Sup<span class="_ _5"></span>ervisor;<span class="_ _6"> </span>and</span></div><div class="t m0 xc h7 y1225 ff4 fs4 fc0 sc0 ls0 ws0">•<span class="_ _18"> </span><span class="ff3">M:<span class="_ _2"> </span>Mac<span class="_ _1"></span>hine</span></div><div class="t m0 xc h8 y1518 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _b"> </span><span class="ff7">Machine<span class="_ _3"> </span></span>privilege<span class="_ _34"> </span>level<span class="_ _3"> </span>has<span class="_ _34"> </span>the<span class="_ _b"> </span>highest<span class="_ _b"> </span>privileges,<span class="_ _7"> </span>allo<span class="_ _1"></span>wing<span class="_ _b"> </span>full<span class="_ _b"> </span>access<span class="_ _34"> </span>to<span class="_ _b"> </span>the<span class="_ _34"> </span>hardw<span class="_ _1"></span>are.<span class="_ _d"> </span>The</div><div class="t m0 xf h8 y1519 ff7 fs4 fc0 sc0 ls0 ws0">Sup<span class="_ _5"></span>ervisor <span class="ff3">privilege level has<span class="_ _6"> </span>the<span class="_ _38"> </span>second-highest<span class="_ _6"> </span>privileges,<span class="_ _6"> </span>and<span class="_ _6"> </span>the<span class="_ _6"> </span></span>User/Application <span class="ff3">privilege level</span></div><div class="t m0 xf h8 y1ce ff3 fs4 fc0 sc0 ls0 ws0">has<span class="_ _2"> </span>the<span class="_ _2"> </span>least<span class="_ _6"> </span>privileges.</div><div class="t m0 xc h8 y1cf ff3 fs4 fc0 sc0 ls0 ws0">A<span class="_ _2"> </span>RISC-V<span class="_ _3"> </span>hardware<span class="_ _2"> </span>platform<span class="_ _3"> </span>may<span class="_ _2"> </span>implement<span class="_ _2"> </span>a<span class="_ _3"> </span>subset<span class="_ _3"> </span>or<span class="_ _2"> </span>all<span class="_ _3"> </span>of<span class="_ _3"> </span>these<span class="_ _3"> </span>privilege<span class="_ _3"> </span>levels.<span class="_ _18"> </span>F<span class="_ _9"></span>or<span class="_ _3"> </span>example,</div><div class="t m0 xf h8 y1d1 ff3 fs4 fc0 sc0 ls0 ws0">when<span class="_ _6"> </span>implementing<span class="_ _6"> </span>a<span class="_ _2"> </span>hardw<span class="_ _1"></span>are<span class="_ _6"> </span>platform<span class="_ _2"> </span>for<span class="_ _2"> </span>a<span class="_ _6"> </span>compact<span class="_ _2"> </span>and<span class="_ _2"> </span>straigh<span class="_ _1"></span>tforw<span class="_ _1"></span>ard<span class="_ _6"> </span>embedded<span class="_ _2"> </span>system,<span class="_ _2"> </span>only<span class="_ _6"> </span>the</div><div class="t m0 xf h8 y151a ff3 fs4 fc0 sc0 ls0 ws0">Mac<span class="_ _1"></span>hine<span class="_ _3"> </span>privilege<span class="_ _3"> </span>level<span class="_ _2"> </span>may<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _b"> </span>required.<span class="_ _4"> </span>On<span class="_ _3"> </span>the<span class="_ _3"> </span>other<span class="_ _b"> </span>hand,<span class="_ _3"> </span>when<span class="_ _3"> </span>implementing<span class="_ _2"> </span>a<span class="_ _b"> </span>hardw<span class="_ _27"></span>are<span class="_ _b"> </span>platform</div><div class="t m0 xf h8 y151b ff3 fs4 fc0 sc0 ls0 ws0">for<span class="_ _2"> </span>a<span class="_ _2"> </span>system<span class="_ _2"> </span>that<span class="_ _2"> </span>relies<span class="_ _2"> </span>on<span class="_ _2"> </span>an<span class="_ _2"> </span>op<span class="_ _5"></span>erating<span class="_ _2"> </span>system<span class="_ _2"> </span>to<span class="_ _2"> </span>manage<span class="_ _2"> </span>applications<span class="_ _2"> </span>(<span class="ff8">e.g.</span>,<span class="_ _2"> </span>a<span class="_ _2"> </span>computer<span class="_ _2"> </span>desktop),<span class="_ _2"> </span>it<span class="_ _2"> </span>is</div><div class="t m0 xf h8 y151c ff3 fs4 fc0 sc0 ls0 ws0">usually<span class="_ _2"> </span>useful<span class="_ _2"> </span>to<span class="_ _6"> </span>include<span class="_ _2"> </span>all<span class="_ _2"> </span>three<span class="_ _2"> </span>privilege<span class="_ _2"> </span>levels<span class="_ _6"> </span>to<span class="_ _2"> </span>facilitate<span class="_ _2"> </span>the<span class="_ _2"> </span>op<span class="_ _5"></span>erating<span class="_ _2"> </span>system<span class="_ _2"> </span>implementation.</div><div class="t m0 x107 h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">133</div><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",72,138.203,null]'><div class="d m1" style="border-style:none;position:absolute;left:91.992000px;bottom:381.430000px;width:125.747000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,241.814,null]'><div class="d m1" style="border-style:none;position:absolute;left:106.633000px;bottom:345.011000px;width:71.554000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,241.814,null]'><div class="d m1" style="border-style:none;position:absolute;left:195.494000px;bottom:309.699000px;width:66.118000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",72,138.203,null]'><div class="d m1" style="border-style:none;position:absolute;left:337.226000px;bottom:297.744000px;width:126.787000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,241.814,null]'><div class="d m1" style="border-style:none;position:absolute;left:71.004000px;bottom:285.788000px;width:65.449000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,241.814,null]'><div class="d m1" style="border-style:none;position:absolute;left:153.531000px;bottom:206.087000px;width:62.220000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,241.814,null]'><div class="d m1" style="border-style:none;position:absolute;left:127.594000px;bottom:193.579000px;width:61.210000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,241.814,null]'><div class="d m1" style="border-style:none;position:absolute;left:394.039000px;bottom:170.222000px;width:65.698000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,241.814,null]'><div class="d m1" style="border-style:none;position:absolute;left:111.195000px;bottom:146.312000px;width:61.859000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
