<div id="pf32" class="pf w0 h0" data-page-no="32"><div class="pc pc32 w0 h0"><img class="bi xf y824 w2 h7b" alt="" src="bg32.png"/><div class="t m0 xf h8 y10b ff3 fs4 fc0 sc0 ls0 ws0">3.3.<span class="_ _1f"> </span>PROGRAM<span class="_ _6"> </span>SECTIONS</div><div class="t m0 xf h9 y57 ff5 fs4 fc0 sc0 ls0 ws0">00000000<span class="_ _18"> </span>&lt;update_x&gt;:</div><div class="t m0 xc h9 y86 ff5 fs4 fc0 sc0 ls0 ws0">0:<span class="_ _87"> </span>00000317<span class="_ _93"> </span>auipc<span class="_ _16"> </span>t1,0x0</div><div class="t m0 xc h9 y87 ff5 fs4 fc0 sc0 ls0 ws0">4:<span class="_ _87"> </span>00030313<span class="_ _93"> </span>mv<span class="_ _18"> </span>t1,t1</div><div class="t m0 xc h9 y88 ff5 fs4 fc0 sc0 ls0 ws0">8:<span class="_ _87"> </span>00a32023<span class="_ _93"> </span>sw<span class="_ _18"> </span>a0,0(t1)<span class="_ _4"> </span>#<span class="_ _4"> </span>0<span class="_ _4"> </span>&lt;update_x&gt;</div><div class="t m0 xc h9 y89 ff5 fs4 fc0 sc0 ls0 ws0">c:<span class="_ _87"> </span>00008067<span class="_ _93"> </span>ret</div><div class="t m0 xf h9 y8b ff5 fs4 fc0 sc0 ls0 ws0">00000010<span class="_ _18"> </span>&lt;update_y&gt;:</div><div class="t m0 x2b h9 y22f ff5 fs4 fc0 sc0 ls0 ws0">10:<span class="_ _87"> </span>00000317<span class="_ _93"> </span>auipc<span class="_ _18"> </span>t1,0x0</div><div class="t m0 x2b h9 y230 ff5 fs4 fc0 sc0 ls0 ws0">14:<span class="_ _87"> </span>00030313<span class="_ _93"> </span>mv<span class="_ _18"> </span>t1,t1</div><div class="t m0 x2b h9 y231 ff5 fs4 fc0 sc0 ls0 ws0">18:<span class="_ _87"> </span>00a32023<span class="_ _93"> </span>sw<span class="_ _18"> </span>a0,0(t1)<span class="_ _4"> </span>#<span class="_ _4"> </span>10<span class="_ _4"> </span>&lt;update_y&gt;</div><div class="t m0 x2b h9 ye5 ff5 fs4 fc0 sc0 ls0 ws0">1c:<span class="_ _87"> </span>00008067<span class="_ _93"> </span>ret</div><div class="t m0 xf h9 y1e ff5 fs4 fc0 sc0 ls0 ws0">Disassembly<span class="_ _18"> </span>of<span class="_ _4"> </span>section<span class="_ _4"> </span>.data:</div><div class="t m0 xf h9 y20 ff5 fs4 fc0 sc0 ls0 ws0">00000000<span class="_ _18"> </span>&lt;x&gt;:</div><div class="t m0 xc h9 y21 ff5 fs4 fc0 sc0 ls0 ws0">0:<span class="_ _87"> </span>000a<span class="_ _94"> </span>c.slli<span class="_ _18"> </span>zero,0x2</div><div class="t m0 x2a h9 y22 ff5 fs4 fc0 sc0 ls0 ws0">...</div><div class="t m0 xf h9 y24 ff5 fs4 fc0 sc0 ls0 ws0">00000004<span class="_ _18"> </span>&lt;y&gt;:</div><div class="t m0 xc h9 y25 ff5 fs4 fc0 sc0 ls0 ws0">4:<span class="_ _87"> </span>000c<span class="_ _94"> </span>0xc</div><div class="t m0 x2a h9 y26 ff5 fs4 fc0 sc0 ls0 ws0">...</div><div class="t m0 xc h8 y92 ff3 fs4 fc0 sc0 ls0 ws0">Notice that<span class="_ _a"> </span>the program routines, represen<span class="_ _27"></span>ted by<span class="_ _a"> </span>the <span class="ff5">update<span class="_ _3"> </span>x<span class="_ _38"> </span></span>and <span class="ff5">update<span class="_ _3"> </span>y<span class="_ _89"> </span></span>lab<span class="_ _5"></span>els, and the program</div><div class="t m0 xf h8 y93 ff3 fs4 fc0 sc0 ls0 ws0">instructions<span class="_ _b"> </span>are<span class="_ _34"> </span>all<span class="_ _34"> </span>lo<span class="_ _5"></span>cated<span class="_ _34"> </span>on<span class="_ _b"> </span>the<span class="_ _34"> </span><span class="ff5">.text<span class="_ _34"> </span></span>section<span class="_ _34"> </span>while<span class="_ _34"> </span>the<span class="_ _b"> </span>global<span class="_ _34"> </span>v<span class="_ _27"></span>ariables,<span class="_ _7"> </span>represented<span class="_ _b"> </span>b<span class="_ _1"></span>y<span class="_ _b"> </span>the<span class="_ _34"> </span><span class="ff5">x<span class="_ _34"> </span></span>and</div><div class="t m0 xf h8 y94 ff5 fs4 fc0 sc0 ls0 ws0">y<span class="_ _3"> </span><span class="ff3">lab<span class="_ _5"></span>els,<span class="_ _3"> </span>and<span class="_ _b"> </span>the<span class="_ _3"> </span>32-bit<span class="_ _3"> </span>v<span class="_ _27"></span>alues<span class="_ _3"> </span><span class="ff5">000a<span class="_ _b"> </span></span>and<span class="_ _3"> </span><span class="ff5">000c</span>,<span class="_ _3"> </span>are<span class="_ _b"> </span>lo<span class="_ _5"></span>cated<span class="_ _3"> </span>on<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">.data<span class="_ _b"> </span></span>section.<span class="_ _4"> </span>Also,<span class="_ _b"> </span>notice<span class="_ _3"> </span>that<span class="_ _3"> </span>the</span></div><div class="t m0 xf h8 y825 ff3 fs4 fc0 sc0 ls0 ws0">elemen<span class="_ _1"></span>ts of eac<span class="_ _1"></span>h section are assigned addresses starting at zero.<span class="_ _34"> </span>How<span class="_ _27"></span>ever, since instructions and data are</div><div class="t m0 xf h8 y96 ff3 fs4 fc0 sc0 ls0 ws0">stored<span class="_ _2"> </span>on<span class="_ _3"> </span>the<span class="_ _3"> </span>same<span class="_ _3"> </span>memory<span class="_ _9"></span>,<span class="_ _2"> </span>the<span class="_ _3"> </span>main<span class="_ _3"> </span>memory,<span class="_ _3"> </span>we<span class="_ _2"> </span>ma<span class="_ _1"></span>y<span class="_ _2"> </span>not<span class="_ _3"> </span>load<span class="_ _3"> </span>the<span class="_ _3"> </span>v<span class="_ _27"></span>ariables<span class="_ _2"> </span>and<span class="_ _3"> </span>the<span class="_ _3"> </span>instruction<span class="_ _3"> </span>in<span class="_ _1"></span>to</div><div class="t m0 xf h8 y97 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _3"> </span>same<span class="_ _3"> </span>memory<span class="_ _b"> </span>addresses.<span class="_ _2a"> </span>The<span class="_ _3"> </span>linker<span class="_ _3"> </span>prev<span class="_ _1"></span>en<span class="_ _1"></span>ts<span class="_ _3"> </span>this<span class="_ _3"> </span>problem<span class="_ _b"> </span>by<span class="_ _2"> </span>relo<span class="_ _5"></span>cating<span class="_ _b"> </span>the<span class="_ _3"> </span>instructions<span class="_ _3"> </span>and<span class="_ _b"> </span>data</div><div class="t m0 xf h8 y98 ff3 fs4 fc0 sc0 ls0 ws0">so<span class="_ _2"> </span>they<span class="_ _3"> </span>are<span class="_ _3"> </span>assigned<span class="_ _3"> </span>non-conﬂicting<span class="_ _2"> </span>addresses.<span class="_ _4"> </span>The<span class="_ _2"> </span>following<span class="_ _2"> </span>commands<span class="_ _3"> </span>show<span class="_ _2"> </span>how<span class="_ _2"> </span>to<span class="_ _2"> </span>inv<span class="_ _27"></span>oke<span class="_ _2"> </span>the<span class="_ _3"> </span>linker</div><div class="t m0 xf h8 y99 ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _6"> </span>pro<span class="_ _5"></span>duce<span class="_ _6"> </span>an<span class="_ _6"> </span>executable<span class="_ _6"> </span>ﬁle<span class="_ _6"> </span>named<span class="_ _6"> </span><span class="ff5">prog.x<span class="_ _6"> </span></span>and<span class="_ _6"> </span>how<span class="_ _6"> </span>to<span class="_ _6"> </span>inv<span class="_ _27"></span>ok<span class="_ _1"></span>e<span class="_ _6"> </span>the<span class="_ _6"> </span><span class="ff5">objdump<span class="_ _6"> </span></span>to<span class="_ _5"></span>ol<span class="_ _6"> </span>to<span class="_ _6"> </span>insp<span class="_ _5"></span>ect<span class="_ _6"> </span>its<span class="_ _6"> </span>conten<span class="_ _27"></span>ts:</div><div class="t m0 xf h9 y74b ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-ld<span class="_ _4"> </span>-m<span class="_ _4"> </span>elf32lriscv<span class="_ _4"> </span>prog.o<span class="_ _4"> </span>-o<span class="_ _18"> </span>prog.x</div><div class="t m0 xf h9 y74c ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-objdump<span class="_ _4"> </span>-D<span class="_ _4"> </span>prog.x</div><div class="t m0 xf h9 y826 ff5 fs4 fc0 sc0 ls0 ws0">prog.x:<span class="_ _8a"> </span>file<span class="_ _18"> </span>format<span class="_ _4"> </span>elf32-littleriscv</div><div class="t m0 xf h9 y750 ff5 fs4 fc0 sc0 ls0 ws0">Disassembly<span class="_ _18"> </span>of<span class="_ _4"> </span>section<span class="_ _4"> </span>.text:</div><div class="t m0 xf h9 y752 ff5 fs4 fc0 sc0 ls0 ws0">00010074<span class="_ _18"> </span>&lt;update_x&gt;:</div><div class="t m0 xc h9 y753 ff5 fs4 fc0 sc0 ls0 ws0">10074:<span class="_ _7a"> </span>00001317<span class="_ _95"> </span>auipc<span class="_ _18"> </span>t1,0x1</div><div class="t m0 xc h9 y827 ff5 fs4 fc0 sc0 ls0 ws0">10078:<span class="_ _7a"> </span>01c30313<span class="_ _95"> </span>addi<span class="_ _18"> </span>t1,t1,28<span class="_ _4"> </span>#<span class="_ _4"> </span>11090<span class="_ _4"> </span>&lt;__DATA_BEGIN__&gt;</div><div class="t m0 xc h9 y755 ff5 fs4 fc0 sc0 ls0 ws0">1007c:<span class="_ _7a"> </span>00a32023<span class="_ _95"> </span>sw<span class="_ _18"> </span>a0,0(t1)</div><div class="t m0 xc h9 y756 ff5 fs4 fc0 sc0 ls0 ws0">10080:<span class="_ _7a"> </span>00008067<span class="_ _95"> </span>ret</div><div class="t m0 x2c h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">Prin<span class="_ _1"></span>ted<span class="_ _2"> </span>v<span class="_ _1"></span>ersion<span class="_ _2"> </span>a<span class="_ _1"></span>v<span class="_ _27"></span>ailable<span class="_ _2"> </span>for<span class="_ _6"> </span>purchase<span class="_ _6"> </span>at<span class="_ _2"> </span>Amazon.com</div><div class="t m0 x2d h8 y141 ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _9"></span>ree<span class="_ _2"> </span>online<span class="_ _6"> </span>version<span class="_ _6"> </span>at<span class="_ _2"> </span><span class="ff5">http://riscv-<span class="_ _22"></span>programming.org</span></div><div class="t m0 x2e h8 y142 ff3 fs4 fc0 sc0 ls0 ws0">(Generated<span class="_ _2"> </span>on<span class="_ _2"> </span>Octob<span class="_ _5"></span>er<span class="_ _6"> </span>15,<span class="_ _2"> </span>2023)</div><div class="t m0 xb8 h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">37</div><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,552.649,null]'><div class="d m1" style="border-style:none;position:absolute;left:161.683000px;bottom:434.924000px;width:14.169000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,499.533,null]'><div class="d m1" style="border-style:none;position:absolute;left:215.844000px;bottom:411.290000px;width:62.284000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://a.co/d/gUfKWsD"><div class="d m1" style="border-style:none;position:absolute;left:358.258000px;bottom:69.067000px;width:58.171000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:271.722000px;bottom:56.835000px;width:148.940000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
