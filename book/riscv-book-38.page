<div id="pf26" class="pf w0 h0" data-page-no="26"><div class="pc pc26 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg26.png"/><div class="t m0 xf hd yed ff6 fs8 fc0 sc0 ls0 ws0">Chapter<span class="_ _1f"> </span>3</div><div class="t m0 xf ha yee ff6 fs5 fc0 sc0 ls0 ws0">Assem<span class="_ _9"></span>bly<span class="_ _c"></span>,<span class="_ _14"> </span>ob<span class="_ _3b"></span>ject,<span class="_ _14"> </span>and<span class="_ _14"> </span>executable</div><div class="t m0 xf ha yef ff6 fs5 fc0 sc0 ls0 ws0">ﬁles</div><div class="t m0 xf h8 yf0 ff3 fs4 fc0 sc0 ls0 ws0">This<span class="_ _2"> </span>c<span class="_ _1"></span>hapter<span class="_ _2"> </span>presen<span class="_ _1"></span>ts<span class="_ _6"> </span>the<span class="_ _3"> </span>main<span class="_ _6"> </span>concepts<span class="_ _2"> </span>and<span class="_ _2"> </span>elements<span class="_ _6"> </span>of<span class="_ _2"> </span>assembly<span class="_ _12"></span>,<span class="_ _2"> </span>ob<span class="_ _22"></span>ject,<span class="_ _2"> </span>and<span class="_ _2"> </span>executable<span class="_ _2"> </span>ﬁles.</div><div class="t m0 xf he y65c ff6 fs3 fc0 sc0 ls0 ws0">3.1<span class="_ _37"> </span>Generating<span class="_ _4"> </span>nativ<span class="_ _27"></span>e<span class="_ _4"> </span>programs</div><div class="t m0 xf h8 y65d ff3 fs4 fc0 sc0 ls0 ws0">In<span class="_ _2"> </span>this<span class="_ _2"> </span>section,<span class="_ _2"> </span>we<span class="_ _6"> </span>discuss<span class="_ _2"> </span>how<span class="_ _6"> </span>a<span class="_ _2"> </span>program<span class="_ _2"> </span>written<span class="_ _2"> </span>in<span class="_ _2"> </span>a<span class="_ _2"> </span>high-level<span class="_ _6"> </span>language,<span class="_ _2"> </span>such<span class="_ _6"> </span>as<span class="_ _2"> </span>C,<span class="_ _2"> </span>is<span class="_ _3"> </span>translated<span class="_ _2"> </span>in<span class="_ _1"></span>to</div><div class="t m0 xf h8 y65e ff3 fs4 fc0 sc0 ls0 ws0">a<span class="_ _2"> </span>nativ<span class="_ _1"></span>e<span class="_ _2"> </span>program.</div><div class="t m0 xc h8 y65f ff3 fs4 fc0 sc0 ls0 ws0">As<span class="_ _2"> </span>discussed<span class="_ _2"> </span>in<span class="_ _3"> </span>Chapter<span class="_ _2"> </span>1,<span class="_ _2"> </span><span class="ff7">a<span class="_ _34"> </span>nativ<span class="_ _27"></span>e<span class="_ _34"> </span>program<span class="_ _b"> </span>is<span class="_ _b"> </span>a<span class="_ _b"> </span>program<span class="_ _b"> </span>enco<span class="_ _5"></span>ded<span class="_ _b"> </span>using<span class="_ _b"> </span>instructions<span class="_ _b"> </span>that</span></div><div class="t m0 xf h8 y1bd ff7 fs4 fc0 sc0 ls0 ws0">can<span class="_ _24"> </span>b<span class="_ _5"></span>e<span class="_ _18"> </span>directly<span class="_ _18"> </span>executed<span class="_ _18"> </span>b<span class="_ _1"></span>y<span class="_ _24"> </span>the<span class="_ _18"> </span>computer<span class="_ _18"> </span>hardw<span class="_ _1"></span>are,<span class="_ _18"> </span>without<span class="_ _18"> </span>help<span class="_ _18"> </span>from<span class="_ _18"> </span>an<span class="_ _24"> </span>emulator<span class="_ _24"> </span>or</div><div class="t m0 xf h8 y1be ff7 fs4 fc0 sc0 ls0 ws0">a<span class="_ _24"> </span>virtual<span class="_ _24"> </span>machine<span class="ff3">.<span class="_ _39"> </span>These<span class="_ _34"> </span>programs<span class="_ _34"> </span>are<span class="_ _34"> </span>usually<span class="_ _34"> </span>automatically<span class="_ _34"> </span>translated<span class="_ _34"> </span>from<span class="_ _34"> </span>programs<span class="_ _34"> </span>written<span class="_ _34"> </span>in</span></div><div class="t m0 xf h8 y1bf ff3 fs4 fc0 sc0 ls0 ws0">high-lev<span class="_ _1"></span>el<span class="_ _2"> </span>languages,<span class="_ _2"> </span>suc<span class="_ _1"></span>h<span class="_ _6"> </span>as<span class="_ _3"> </span>C,<span class="_ _6"> </span>by<span class="_ _6"> </span>to<span class="_ _5"></span>ols<span class="_ _2"> </span>like<span class="_ _6"> </span>compilers,<span class="_ _2"> </span>assemblers,<span class="_ _6"> </span>and<span class="_ _2"> </span>linkers.</div><div class="t m0 xc h8 y1c0 ff3 fs4 fc0 sc0 ls0 ws0">A<span class="_ _b"> </span>program<span class="_ _34"> </span>written<span class="_ _34"> </span>in<span class="_ _34"> </span>a<span class="_ _34"> </span>high-level<span class="_ _b"> </span>language,<span class="_ _34"> </span>such<span class="_ _b"> </span>as<span class="_ _34"> </span>C,<span class="_ _34"> </span>is<span class="_ _34"> </span>enco<span class="_ _5"></span>ded<span class="_ _b"> </span>as<span class="_ _34"> </span>a<span class="_ _34"> </span>plain<span class="_ _34"> </span>text<span class="_ _34"> </span>ﬁle.<span class="_ _39"> </span>High-level</div><div class="t m0 xf h8 y1c1 ff3 fs4 fc0 sc0 ls0 ws0">languages<span class="_ _2"> </span>are<span class="_ _3"> </span>designed<span class="_ _3"> </span>to<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _3"> </span>agnostic<span class="_ _3"> </span>of<span class="_ _2"> </span>ISA<span class="_ _3"> </span>and<span class="_ _3"> </span>they<span class="_ _3"> </span>are<span class="_ _2"> </span>comp<span class="_ _5"></span>osed<span class="_ _3"> </span>of<span class="_ _3"> </span>sev<span class="_ _1"></span>eral<span class="_ _2"> </span>abstract<span class="_ _3"> </span>elements,<span class="_ _2"> </span>such</div><div class="t m0 xf h8 y1c2 ff3 fs4 fc0 sc0 ls0 ws0">as<span class="_ _b"> </span>v<span class="_ _27"></span>ariables,<span class="_ _7"> </span>rep<span class="_ _5"></span>etition,<span class="_ _34"> </span>or<span class="_ _34"> </span>lo<span class="_ _5"></span>op<span class="_ _34"> </span>statements,<span class="_ _b"> </span>conditional<span class="_ _34"> </span>statements,<span class="_ _34"> </span>routines,<span class="_ _34"> </span><span class="ff8">etc</span>.<span class="_ _39"> </span>The<span class="_ _34"> </span>following<span class="_ _b"> </span>co<span class="_ _5"></span>de</div><div class="t m0 xf h8 y1c3 ff3 fs4 fc0 sc0 ls0 ws0">sho<span class="_ _1"></span>ws<span class="_ _2"> </span>an<span class="_ _2"> </span>example<span class="_ _6"> </span>of<span class="_ _3"> </span>a<span class="_ _6"> </span>program<span class="_ _2"> </span>written<span class="_ _2"> </span>using<span class="_ _2"> </span>the<span class="_ _2"> </span>C<span class="_ _2"> </span>language,<span class="_ _2"> </span>which<span class="_ _6"> </span>is<span class="_ _2"> </span>a<span class="_ _2"> </span>high-level<span class="_ _6"> </span>language.</div><div class="t m0 x114 h9 y660 ff22 fs11 fc0 sc0 ls0 ws0">1<span class="_ _2a"> </span><span class="ff5 fs4">int<span class="_ _4"> </span>main()</span></div><div class="t m0 x114 h9 y661 ff22 fs11 fc0 sc0 ls0 ws0">2<span class="_ _2a"> </span><span class="ff5 fs4">{</span></div><div class="t m0 x114 h9 y662 ff22 fs11 fc0 sc0 ls0 ws0">3<span class="_ _37"> </span><span class="ff5 fs4">int<span class="_ _18"> </span>r<span class="_ _4"> </span>=<span class="_ _4"> </span>func<span class="_ _4"> </span>(10)</span></div><div class="t m0 x114 h9 y663 ff22 fs11 fc0 sc0 ls0 ws0">4<span class="_ _37"> </span><span class="ff5 fs4">return<span class="_ _18"> </span>r+1;</span></div><div class="t m0 x114 h9 y664 ff22 fs11 fc0 sc0 ls0 ws0">5<span class="_ _2a"> </span><span class="ff5 fs4">}</span></div><div class="t m0 xc h8 y665 ff7 fs4 fc0 sc0 ls0 ws0">A<span class="_ _7"> </span>compiler<span class="_ _7"> </span>is<span class="_ _7"> </span>a<span class="_ _7"> </span>to<span class="_ _5"></span>ol<span class="_ _7"> </span>that<span class="_ _7"> </span>translates<span class="_ _7"> </span>a<span class="_ _7"> </span>program<span class="_ _7"> </span>from<span class="_ _24"> </span>one<span class="_ _34"> </span>language<span class="_ _24"> </span>to<span class="_ _34"> </span>another<span class="ff3">.<span class="_ _17"> </span>Usually<span class="_ _9"></span>,</span></div><div class="t m0 xf h8 y666 ff3 fs4 fc0 sc0 ls0 ws0">programming<span class="_"> </span>language<span class="_"> </span>compilers<span class="_ _a"> </span>are<span class="_"> </span>emplo<span class="_ _1"></span>y<span class="_ _1"></span>ed<span class="_"> </span>to<span class="_"> </span>translate<span class="_ _a"> </span>programs<span class="_"> </span>written<span class="_"> </span>in<span class="_"> </span>high-lev<span class="_ _27"></span>el<span class="_"> </span>languages<span class="_"> </span>in<span class="_ _27"></span>to</div><div class="t m0 xf h8 y667 ff3 fs4 fc0 sc0 ls0 ws0">lo<span class="_ _1"></span>w<span class="_ _1"></span>er-lev<span class="_ _1"></span>el<span class="_ _3"> </span>languages.<span class="_ _18"> </span>F<span class="_ _9"></span>or<span class="_ _3"> </span>example,<span class="_ _3"> </span>a<span class="_ _3"> </span>C<span class="_ _3"> </span>compiler<span class="_ _3"> </span>is<span class="_ _3"> </span>employ<span class="_ _27"></span>ed<span class="_ _3"> </span>to<span class="_ _3"> </span>translate<span class="_ _3"> </span>a<span class="_ _2"> </span>program<span class="_ _3"> </span>written<span class="_ _3"> </span>in<span class="_ _3"> </span>C<span class="_ _3"> </span>lan-</div><div class="t m0 xf h8 y668 ff3 fs4 fc0 sc0 ls0 ws0">guage<span class="_ _a"> </span>into<span class="_ _35"> </span>assembly<span class="_ _35"> </span>language.<span class="_ _34"> </span>The<span class="_ _a"> </span>GNU<span class="_ _a"> </span>pro<span class="_ _22"></span>ject<span class="_ _a"> </span>C<span class="_ _a"> </span>and<span class="_ _a"> </span>C++<span class="_ _a"> </span>compiler</div><div class="t m0 x85 h11 y669 ffc fs7 fc0 sc0 ls0 ws0">1</div><div class="t m0 x81 h8 y668 ff3 fs4 fc0 sc0 ls0 ws0">,<span class="_"> </span>or<span class="_ _35"> </span><span class="ff5">gcc</span>,<span class="_"> </span>is<span class="_ _35"> </span>a<span class="_"> </span>compiler<span class="_ _35"> </span>that<span class="_ _a"> </span>is<span class="_ _a"> </span>capa-</div><div class="t m0 xf h8 y66a ff3 fs4 fc0 sc0 ls0 ws0">ble<span class="_ _35"> </span>of<span class="_ _a"> </span>translating<span class="_ _a"> </span>programs<span class="_ _a"> </span>written<span class="_ _a"> </span>in<span class="_ _a"> </span>C<span class="_ _a"> </span>and<span class="_ _a"> </span>C++<span class="_ _a"> </span>languages<span class="_ _35"> </span>into<span class="_ _35"> </span>assembly<span class="_ _35"> </span>programs,<span class="_"> </span><span class="ff8">i.e.</span>,<span class="_ _a"> </span>a<span class="_ _a"> </span>program<span class="_ _35"> </span>writ-</div><div class="t m0 xf h8 y66b ff3 fs4 fc0 sc0 ls0 ws0">ten<span class="_ _3"> </span>in<span class="_ _3"> </span>assembly<span class="_ _2"> </span>language.<span class="_ _4"> </span>The<span class="_ _3"> </span>following<span class="_ _2"> </span>command<span class="_ _3"> </span>line<span class="_ _3"> </span>illustrates<span class="_ _3"> </span>how<span class="_ _2"> </span>the<span class="_ _3"> </span><span class="ff5">riscv64-unknown-elf-gcc</span></div><div class="t m0 xf h8 y66c ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _5"></span>ol,<span class="_ _7"> </span>a<span class="_ _7"> </span>GNU<span class="_ _7"> </span>pro<span class="_ _22"></span>ject<span class="_ _34"> </span>C<span class="_ _34"> </span>and<span class="_ _7"> </span>C++<span class="_ _7"> </span>compiler<span class="_ _34"> </span>that<span class="_ _7"> </span>pro<span class="_ _5"></span>duces<span class="_ _7"> </span>co<span class="_ _5"></span>de<span class="_ _34"> </span>for<span class="_ _7"> </span>RISC-V<span class="_ _7"> </span>based<span class="_ _34"> </span>computers,<span class="_ _24"> </span>can<span class="_ _7"> </span>b<span class="_ _5"></span>e</div><div class="t m0 xf h8 y66d ff3 fs4 fc0 sc0 ls0 ws0">in<span class="_ _1"></span>v<span class="_ _1"></span>ok<span class="_ _1"></span>ed<span class="_ _3"> </span>to<span class="_ _b"> </span>pro<span class="_ _5"></span>duce<span class="_ _b"> </span>a<span class="_ _b"> </span>R<span class="_ _12"></span>V32I<span class="_ _3"> </span>assembly<span class="_ _3"> </span>program<span class="_ _b"> </span>from<span class="_ _b"> </span>a<span class="_ _3"> </span>C<span class="_ _b"> </span>program.<span class="_ _1c"> </span>In<span class="_ _b"> </span>this<span class="_ _b"> </span>example,<span class="_ _b"> </span>the<span class="_ _3"> </span>C<span class="_ _b"> </span>program<span class="_ _b"> </span>is</div><div class="t m0 xf h8 y66e ff3 fs4 fc0 sc0 ls0 ws0">stored<span class="_ _2"> </span>on<span class="_ _2"> </span>the<span class="_ _6"> </span><span class="ff5">main.c<span class="_ _2"> </span></span>ﬁle<span class="_ _2"> </span>and<span class="_ _2"> </span>the<span class="_ _2"> </span>R<span class="_ _9"></span>V32I<span class="_ _6"> </span>assembly<span class="_ _6"> </span>program<span class="_ _2"> </span>will<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _2"> </span>stored<span class="_ _2"> </span>on<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">main.s<span class="_ _2"> </span></span>ﬁle.</div><div class="t m0 xf h9 y66f ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-gcc<span class="_ _4"> </span>-mabi=ilp32<span class="_ _4"> </span>-march=rv32i<span class="_ _4"> </span>-S<span class="_ _4"> </span>main.c<span class="_ _18"> </span>-o<span class="_ _4"> </span>main.s</div><div class="t m0 x2b h1d y670 fff fsd fc0 sc0 ls0 ws0">1</div><div class="t m0 xc h38 y671 ff28 fse fc0 sc0 ls0 ws0">https://gcc.gnu.org/</div><div class="t m0 x14 h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">25</div><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,450.279,null]'><div class="d m1" style="border-style:none;position:absolute;left:79.306000px;bottom:447.183000px;width:68.466000px;height:10.584000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pff" data-dest-detail='[15,"XYZ",72,733.028,null]'><div class="d m1" style="border-style:none;position:absolute;left:194.813000px;bottom:435.228000px;width:6.974000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,450.279,null]'><div class="d m1" style="border-style:none;position:absolute;left:215.518000px;bottom:435.228000px;width:78.857000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,468.88,null]'><div class="d m1" style="border-style:none;position:absolute;left:250.811000px;bottom:375.452000px;width:18.597000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf26" data-dest-detail='[38,"XYZ",87.243,126.571,null]'><div class="d m1" style="border-style:none;position:absolute;left:371.540000px;bottom:213.435000px;width:6.462000px;height:12.316000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://gcc.gnu.org/"><div class="d m1" style="border-style:none;position:absolute;left:86.247000px;bottom:113.271000px;width:86.676000px;height:11.497000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
