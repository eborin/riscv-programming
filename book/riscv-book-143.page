<div id="pf8f" class="pf w0 h0" data-page-no="8f"><div class="pc pc8f w0 h0"><img class="bi xf yefe w2 hbd" alt="" src="bg8f.png"/><div class="t m0 xf h8 y105 ff3 fs4 fc0 sc0 ls0 ws0">9.3.<span class="_ _1f"> </span>INTERRUPTS<span class="_ _6"> </span>ON<span class="_ _2"> </span>R<span class="_ _12"></span>V32I</div><div class="t m0 xf h8 y57 ff3 fs4 fc0 sc0 ls0 ws0">called<span class="_ _2"> </span>here<span class="_ _2"> </span>ISR<span class="_ _2"> </span>stack,<span class="_ _2"> </span>is<span class="_ _2"> </span>allo<span class="_ _5"></span>cated<span class="_ _2"> </span>on<span class="_ _3"> </span>main<span class="_ _2"> </span>memory<span class="_ _2"> </span>on<span class="_ _2"> </span>a<span class="_ _3"> </span>set<span class="_ _2"> </span>of<span class="_ _2"> </span>addresses<span class="_ _2"> </span>that<span class="_ _3"> </span>do<span class="_ _5"></span>es<span class="_ _2"> </span>not<span class="_ _2"> </span>collide<span class="_ _2"> </span>with<span class="_ _3"> </span>the</div><div class="t m0 xf h8 y86 ff3 fs4 fc0 sc0 ls0 ws0">addresses<span class="_ _b"> </span>used<span class="_ _b"> </span>by<span class="_ _b"> </span>other<span class="_ _b"> </span>programs<span class="_ _b"> </span>running<span class="_ _b"> </span>on<span class="_ _34"> </span>the<span class="_ _b"> </span>system.<span class="_ _d"> </span>In<span class="_ _b"> </span>this<span class="_ _b"> </span>wa<span class="_ _27"></span>y<span class="_ _9"></span>,<span class="_ _34"> </span>whenever<span class="_ _b"> </span>an<span class="_ _b"> </span>interrupt<span class="_ _3"> </span>o<span class="_ _5"></span>ccurs,</div><div class="t m0 xf h8 y87 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _38"> </span>interrupt service<span class="_ _6"> </span>routine<span class="_ _6"> </span>can<span class="_ _6"> </span>safely<span class="_ _6"> </span>sav<span class="_ _27"></span>e<span class="_ _6"> </span>the<span class="_ _6"> </span>context of<span class="_ _6"> </span>the<span class="_ _6"> </span>curren<span class="_ _1"></span>tly<span class="_ _6"> </span>executing<span class="_ _38"> </span>program<span class="_ _6"> </span>into the<span class="_ _6"> </span>ISR</div><div class="t m0 xf h8 y88 ff3 fs4 fc0 sc0 ls0 ws0">stac<span class="_ _1"></span>k.</div><div class="t m0 xc h8 y89 ff3 fs4 fc0 sc0 ls0 ws0">T<span class="_ _9"></span>o<span class="_ _b"> </span>push<span class="_ _b"> </span>v<span class="_ _27"></span>alues<span class="_ _b"> </span>in<span class="_ _1"></span>to<span class="_ _b"> </span>the<span class="_ _b"> </span>ISR<span class="_ _b"> </span>stack,<span class="_ _3"> </span>we<span class="_ _b"> </span>m<span class="_ _1"></span>ust<span class="_ _b"> </span>ﬁrst<span class="_ _b"> </span>mak<span class="_ _1"></span>e<span class="_ _b"> </span>the<span class="_ _b"> </span><span class="ff5">SP<span class="_ _b"> </span></span>register<span class="_ _b"> </span>p<span class="_ _5"></span>oin<span class="_ _1"></span>t<span class="_ _b"> </span>to<span class="_ _b"> </span>the<span class="_ _b"> </span>top<span class="_ _b"> </span>of<span class="_ _b"> </span>the<span class="_ _b"> </span>ISR</div><div class="t m0 xf h8 y8a ff3 fs4 fc0 sc0 ls0 ws0">stac<span class="_ _1"></span>k.<span class="_ _4"> </span>In<span class="_ _b"> </span>the<span class="_ _3"> </span>R<span class="_ _12"></span>V32I<span class="_ _3"> </span>ISA,<span class="_ _3"> </span>this<span class="_ _b"> </span>task<span class="_ _3"> </span>can<span class="_ _3"> </span>b<span class="_ _5"></span>e<span class="_ _3"> </span>p<span class="_ _5"></span>erformed<span class="_ _3"> </span>with<span class="_ _b"> </span>help<span class="_ _3"> </span>from<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">mscratch<span class="_ _3"> </span></span>CSR.<span class="_ _b"> </span>T<span class="_ _9"></span>o<span class="_ _3"> </span>do<span class="_ _3"> </span>so,<span class="_ _b"> </span>w<span class="_ _1"></span>e</div><div class="t m0 xf h8 y8b ff3 fs4 fc0 sc0 ls0 ws0">ﬁrst<span class="_ _b"> </span>conﬁgure<span class="_ _b"> </span>the<span class="_ _b"> </span>system<span class="_ _b"> </span>so<span class="_ _b"> </span>that<span class="_ _b"> </span>the<span class="_ _b"> </span><span class="ff5">mscratch<span class="_ _b"> </span></span>CSR<span class="_ _b"> </span>p<span class="_ _5"></span>oin<span class="_ _1"></span>ts<span class="_ _b"> </span>to<span class="_ _b"> </span>the<span class="_ _b"> </span>top<span class="_ _b"> </span>of<span class="_ _b"> </span>the<span class="_ _b"> </span>ISR<span class="_ _b"> </span>stac<span class="_ _1"></span>k<span class="_ _b"> </span>on<span class="_ _b"> </span>p<span class="_ _5"></span>o<span class="_ _1"></span>w<span class="_ _1"></span>er-up.</div><div class="t m0 xf h8 y224 ff3 fs4 fc0 sc0 ls0 ws0">Then,<span class="_ _2"> </span>at<span class="_ _2"> </span>the<span class="_ _6"> </span>b<span class="_ _5"></span>eginning/end<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _2"> </span>interrupt<span class="_ _6"> </span>service<span class="_ _2"> </span>routine,<span class="_ _2"> </span>we<span class="_ _6"> </span>exchange<span class="_ _6"> </span>the<span class="_ _2"> </span>v<span class="_ _27"></span>alue<span class="_ _2"> </span>of<span class="_ _2"> </span><span class="ff5">mscratch<span class="_ _2"> </span></span>and<span class="_ _2"> </span><span class="ff5">SP</span></div><div class="t m0 xf h8 y225 ff3 fs4 fc0 sc0 ls0 ws0">b<span class="_ _1"></span>y<span class="_ _3"> </span>executing<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">csrrw<span class="_ _b"> </span></span>instruction.<span class="_ _4"> </span>The<span class="_ _3"> </span>following<span class="_ _3"> </span>code<span class="_ _b"> </span>illustrates<span class="_ _3"> </span>this<span class="_ _3"> </span>pro<span class="_ _5"></span>cess.<span class="_ _2a"> </span>First<span class="_ _3"> </span>(line<span class="_ _3"> </span>3),<span class="_ _3"> </span>the<span class="_ _b"> </span>ISR</div><div class="t m0 xf h8 y226 ff3 fs4 fc0 sc0 ls0 ws0">sw<span class="_ _1"></span>aps<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">sp<span class="_ _3"> </span></span>and<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">mscratch<span class="_ _3"> </span></span>registers’<span class="_ _b"> </span>con<span class="_ _27"></span>tents<span class="_ _3"> </span>so<span class="_ _3"> </span>that<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">sp<span class="_ _3"> </span></span>register<span class="_ _3"> </span>p<span class="_ _5"></span>oints<span class="_ _2"> </span>to<span class="_ _b"> </span>the<span class="_ _3"> </span>top<span class="_ _3"> </span>of<span class="_ _3"> </span>the<span class="_ _3"> </span>ISR</div><div class="t m0 xf h8 yc2 ff3 fs4 fc0 sc0 ls0 ws0">stac<span class="_ _1"></span>k<span class="_ _2"> </span>and<span class="_ _6"> </span>the<span class="_ _2"> </span><span class="ff5">mscratch<span class="_ _2"> </span></span>p<span class="_ _5"></span>oints<span class="_ _6"> </span>to<span class="_ _2"> </span>the<span class="_ _2"> </span>top<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _2"> </span>previous<span class="_ _2"> </span>program<span class="_ _2"> </span>stack.<span class="_ _34"> </span>Then,<span class="_ _2"> </span>the<span class="_ _2"> </span>ISR<span class="_ _2"> </span>allo<span class="_ _5"></span>cates<span class="_ _2"> </span>space</div><div class="t m0 xf h8 y1d ff3 fs4 fc0 sc0 ls0 ws0">on<span class="_ _b"> </span>the<span class="_ _b"> </span>ISR<span class="_ _b"> </span>stack<span class="_ _3"> </span>and<span class="_ _34"> </span>sav<span class="_ _27"></span>es<span class="_ _b"> </span>all<span class="_ _b"> </span>the<span class="_ _b"> </span>necessary<span class="_ _34"> </span>con<span class="_ _1"></span>text<span class="_ _b"> </span>(lines<span class="_ _b"> </span>4-7).<span class="_ _17"> </span>After<span class="_ _34"> </span>this,<span class="_ _b"> </span>it<span class="_ _34"> </span>identiﬁes<span class="_ _3"> </span>the<span class="_ _b"> </span>interrupt</div><div class="t m0 xf h8 y1e ff3 fs4 fc0 sc0 ls0 ws0">source b<span class="_ _27"></span>y inspecting the <span class="ff5">mcause<span class="_ _a"> </span></span>CSR and in<span class="_ _27"></span>vok<span class="_ _27"></span>es the<span class="_ _a"> </span>sp<span class="_ _5"></span>ecialized ISR to<span class="_ _a"> </span>handle the in<span class="_ _27"></span>terrupt (lines<span class="_ _a"> </span>9-11).</div><div class="t m0 xf h8 y1f ff3 fs4 fc0 sc0 ls0 ws0">Finally<span class="_ _9"></span>,<span class="_ _3"> </span>the<span class="_ _3"> </span>ISR<span class="_ _3"> </span>restores<span class="_ _3"> </span>the<span class="_ _b"> </span>con<span class="_ _27"></span>text<span class="_ _b"> </span>b<span class="_ _27"></span>y<span class="_ _b"> </span>loading<span class="_ _3"> </span>the<span class="_ _3"> </span>registers’<span class="_ _3"> </span>v<span class="_ _27"></span>alues<span class="_ _3"> </span>from<span class="_ _3"> </span>the<span class="_ _3"> </span>ISR<span class="_ _3"> </span>stack,<span class="_ _3"> </span>swapping<span class="_ _2"> </span>the</div><div class="t m0 xf h8 y20 ff5 fs4 fc0 sc0 ls0 ws0">mscratch<span class="_ _2"> </span><span class="ff3">and<span class="_ _2"> </span></span>sp<span class="_ _6"> </span><span class="ff3">registers’<span class="_ _2"> </span>conten<span class="_ _27"></span>ts,<span class="_ _2"> </span>and<span class="_ _2"> </span>executing<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">mret<span class="_ _2"> </span></span>instruction.</span></div><div class="t m0 x116 h9 y95a ff22 fs11 fc0 sc0 ls0 ws0">1<span class="_ _2a"> </span><span class="ff5 fs4">main_isr:</span></div><div class="t m0 x116 h9 y95b ff22 fs11 fc0 sc0 ls0 ws0">2<span class="_ _37"> </span><span class="ff5 fs4">#<span class="_ _18"> </span>Save<span class="_ _4"> </span>the<span class="_ _4"> </span>context</span></div><div class="t m0 x116 h9 y95c ff22 fs11 fc0 sc0 ls0 ws0">3<span class="_ _37"> </span><span class="ff5 fs4">csrrw<span class="_ _18"> </span>sp,<span class="_ _4"> </span>mscratch,<span class="_ _4"> </span>sp<span class="_ _79"> </span>#<span class="_ _18"> </span>exchange<span class="_ _4"> </span>sp<span class="_ _4"> </span>with<span class="_ _18"> </span>mscratch</span></div><div class="t m0 x116 h9 y14d5 ff22 fs11 fc0 sc0 ls0 ws0">4<span class="_ _37"> </span><span class="ff5 fs4">addi<span class="_ _79"> </span>sp,<span class="_ _18"> </span>sp,<span class="_ _4"> </span>-64<span class="_ _65"> </span>#<span class="_ _4"> </span>allocate<span class="_ _4"> </span>space<span class="_ _4"> </span>at<span class="_ _18"> </span>the<span class="_ _4"> </span>ISR<span class="_ _4"> </span>stack</span></div><div class="t m0 x116 h9 y11ce ff22 fs11 fc0 sc0 ls0 ws0">5<span class="_ _37"> </span><span class="ff5 fs4">sw<span class="_ _18"> </span>a0,<span class="_ _4"> </span>0(sp)<span class="_ _98"> </span>#<span class="_ _4"> </span>save<span class="_ _4"> </span>a0</span></div><div class="t m0 x116 h9 y11fd ff22 fs11 fc0 sc0 ls0 ws0">6<span class="_ _37"> </span><span class="ff5 fs4">sw<span class="_ _18"> </span>a1,<span class="_ _4"> </span>4(sp)<span class="_ _98"> </span>#<span class="_ _4"> </span>save<span class="_ _4"> </span>a1</span></div><div class="t m0 x116 h9 y11fe ff22 fs11 fc0 sc0 ls0 ws0">7<span class="_ _37"> </span><span class="ff5 fs4">...</span></div><div class="t m0 x116 h39 y11ff ff22 fs11 fc0 sc0 ls0 ws0">8</div><div class="t m0 x116 h9 y1200 ff22 fs11 fc0 sc0 ls0 ws0">9<span class="_ _37"> </span><span class="ff5 fs4">#<span class="_ _18"> </span>Handles<span class="_ _4"> </span>the<span class="_ _4"> </span>interrupt</span></div><div class="t m0 x126 h9 y1201 ff22 fs11 fc0 sc0 ls0 ws0">10<span class="_ _37"> </span><span class="ff5 fs4">csrr<span class="_ _79"> </span>a1,<span class="_ _18"> </span>mcause<span class="_ _89"> </span>#<span class="_ _4"> </span>read<span class="_ _18"> </span>the<span class="_ _4"> </span>interrupt<span class="_ _4"> </span>cause<span class="_ _4"> </span>and<span class="_ _18"> </span>perform</span></div><div class="t m0 x126 h9 y1202 ff22 fs11 fc0 sc0 ls0 ws0">11<span class="_ _37"> </span><span class="ff5 fs4">...<span class="_ _ba"> </span>#<span class="_ _18"> </span>some<span class="_ _4"> </span>action<span class="_ _4"> </span>according<span class="_ _4"> </span>to<span class="_ _18"> </span>the<span class="_ _4"> </span>cause.</span></div><div class="t m0 x126 h39 y14d6 ff22 fs11 fc0 sc0 ls0 ws0">12</div><div class="t m0 x126 h9 y14d7 ff22 fs11 fc0 sc0 ls0 ws0">13<span class="_ _37"> </span><span class="ff5 fs4">#<span class="_ _18"> </span>Restore<span class="_ _4"> </span>the<span class="_ _4"> </span>context</span></div><div class="t m0 x126 h9 y14d8 ff22 fs11 fc0 sc0 ls0 ws0">14<span class="_ _37"> </span><span class="ff5 fs4">...</span></div><div class="t m0 x126 h9 y14d9 ff22 fs11 fc0 sc0 ls0 ws0">15<span class="_ _37"> </span><span class="ff5 fs4">lw<span class="_ _18"> </span>a1,<span class="_ _4"> </span>4(sp)<span class="_ _94"> </span>#<span class="_ _4"> </span>restore<span class="_ _18"> </span>a1</span></div><div class="t m0 x126 h9 y14da ff22 fs11 fc0 sc0 ls0 ws0">16<span class="_ _37"> </span><span class="ff5 fs4">lw<span class="_ _18"> </span>a0,<span class="_ _4"> </span>0(sp)<span class="_ _94"> </span>#<span class="_ _4"> </span>restore<span class="_ _18"> </span>a0</span></div><div class="t m0 x126 h9 y14db ff22 fs11 fc0 sc0 ls0 ws0">17<span class="_ _37"> </span><span class="ff5 fs4">addi<span class="_ _79"> </span>sp,<span class="_ _18"> </span>sp,<span class="_ _4"> </span>64<span class="_ _65"> </span>#<span class="_ _4"> </span>deallocate<span class="_ _4"> </span>space<span class="_ _4"> </span>from<span class="_ _18"> </span>the<span class="_ _4"> </span>ISR<span class="_ _4"> </span>stack</span></div><div class="t m0 x126 h9 y14dc ff22 fs11 fc0 sc0 ls0 ws0">18<span class="_ _37"> </span><span class="ff5 fs4">csrrw<span class="_ _18"> </span>sp,<span class="_ _4"> </span>mscratch,<span class="_ _4"> </span>sp<span class="_ _4"> </span>#<span class="_ _18"> </span>exchange<span class="_ _4"> </span>sp<span class="_ _4"> </span>with<span class="_ _4"> </span>mscratch</span></div><div class="t m0 x126 h9 y14dd ff22 fs11 fc0 sc0 ls0 ws0">19<span class="_ _37"> </span><span class="ff5 fs4">mret<span class="_ _53"> </span>#<span class="_ _4"> </span>return<span class="_ _4"> </span>from<span class="_ _4"> </span>the<span class="_ _18"> </span>interrupt</span></div><div class="t m0 xc h8 y14de ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _2"> </span><span class="ff5">mret<span class="_ _2"> </span></span>instruction<span class="_ _2"> </span>is<span class="_ _2"> </span>a<span class="_ _2"> </span>sp<span class="_ _5"></span>ecial<span class="_ _2"> </span>instruction<span class="_ _3"> </span>that<span class="_ _2"> </span>recov<span class="_ _27"></span>ers<span class="_ _2"> </span>the<span class="_ _2"> </span>context<span class="_ _6"> </span>that<span class="_ _2"> </span>was<span class="_ _6"> </span>automatically<span class="_ _3"> </span>sa<span class="_ _27"></span>ved</div><div class="t m0 xf h8 y14df ff3 fs4 fc0 sc0 ls0 ws0">b<span class="_ _1"></span>y<span class="_ _3"> </span>the<span class="_ _3"> </span>CPU<span class="_ _b"> </span>hardw<span class="_ _1"></span>are.<span class="_ _2a"> </span>More<span class="_ _3"> </span>sp<span class="_ _5"></span>eciﬁcally<span class="_ _9"></span>,<span class="_ _b"> </span>it<span class="_ _3"> </span>recov<span class="_ _27"></span>ers<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">mstatus</span>.<span class="ff5">MIE<span class="_ _b"> </span></span>subﬁeld<span class="_ _3"> </span>conten<span class="_ _27"></span>ts<span class="_ _3"> </span>by<span class="_ _3"> </span>copying<span class="_ _2"> </span>the</div><div class="t m0 xf h8 y14e0 ff3 fs4 fc0 sc0 ls0 ws0">v<span class="_ _27"></span>alue<span class="_ _6"> </span>from<span class="_ _6"> </span><span class="ff5">mstatus</span>.<span class="ff5">MPIE<span class="_ _6"> </span></span>and<span class="_ _2"> </span>the<span class="_ _6"> </span>PC<span class="_ _6"> </span>register’s<span class="_ _2"> </span>conten<span class="_ _27"></span>ts<span class="_ _6"> </span>by copying<span class="_ _6"> </span>the<span class="_ _6"> </span>v<span class="_ _27"></span>alues<span class="_ _6"> </span>from<span class="_ _2"> </span>the<span class="_ _6"> </span><span class="ff5">mepc<span class="_ _6"> </span></span>register</div><div class="t m0 xf0 h12 y14e1 ffc fs7 fc0 sc0 ls0 ws0">10</div><div class="t m0 x42 h8 y14e0 ff3 fs4 fc0 sc0 ls0 ws0">.</div><div class="t m0 xf hb y14e2 ff6 fs6 fc0 sc0 ls0 ws0">9.3.5<span class="_ _11"> </span>Setting<span class="_ _7"> </span>up<span class="_ _7"> </span>the<span class="_ _7"> </span>interrupt<span class="_ _34"> </span>handling<span class="_ _7"> </span>mechanism</div><div class="t m0 xf h8 y14e3 ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _9"></span>or<span class="_ _6"> </span>the<span class="_ _2"> </span>interrupt<span class="_ _6"> </span>handling<span class="_ _2"> </span>mechanism<span class="_ _6"> </span>to<span class="_ _6"> </span>work<span class="_ _6"> </span>prop<span class="_ _5"></span>erly<span class="_ _9"></span>,<span class="_ _2"> </span>a<span class="_ _2"> </span>set<span class="_ _2"> </span>of<span class="_ _6"> </span>tasks<span class="_ _2"> </span>must<span class="_ _6"> </span>b<span class="_ _5"></span>e<span class="_ _2"> </span>p<span class="_ _5"></span>erformed.<span class="_ _7"> </span>These<span class="_ _2"> </span>tasks,</div><div class="t m0 xf h8 y14e4 ff3 fs4 fc0 sc0 ls0 ws0">usually<span class="_ _2"> </span>p<span class="_ _5"></span>erformed<span class="_ _6"> </span>on<span class="_ _2"> </span>the<span class="_ _2"> </span>b<span class="_ _5"></span>o<span class="_ _5"></span>ot<span class="_ _2"> </span>pro<span class="_ _5"></span>cess,<span class="_ _2"> </span>are<span class="_ _2"> </span>discussed<span class="_ _2"> </span>in<span class="_ _2"> </span>the<span class="_ _2"> </span>following<span class="_ _6"> </span>sections.</div><div class="t m0 xf h8 y14e5 ff7 fs4 fc0 sc0 ls0 ws0">Registering<span class="_ _3"> </span>the<span class="_ _b"> </span>interrupt<span class="_ _3"> </span>service<span class="_ _3"> </span>routine(s)</div><div class="t m0 xf h8 y14e6 ff3 fs4 fc0 sc0 ls0 ws0">T<span class="_ _9"></span>o<span class="_ _b"> </span>register<span class="_ _b"> </span>the<span class="_ _b"> </span>interrupt<span class="_ _b"> </span>service<span class="_ _b"> </span>routine,<span class="_ _34"> </span>the<span class="_ _b"> </span>system<span class="_ _34"> </span>must<span class="_ _3"> </span>write<span class="_ _b"> </span>the<span class="_ _34"> </span>address<span class="_ _b"> </span>of<span class="_ _b"> </span>the<span class="_ _34"> </span>ISR<span class="_ _b"> </span>(direct<span class="_ _b"> </span>mo<span class="_ _5"></span>de)</div><div class="t m0 xf h8 y14e7 ff3 fs4 fc0 sc0 ls0 ws0">or<span class="_ _7"> </span>the<span class="_ _7"> </span>base<span class="_ _7"> </span>address<span class="_ _7"> </span>of<span class="_ _7"> </span>the<span class="_ _7"> </span>interrupt<span class="_ _34"> </span>v<span class="_ _1"></span>ector<span class="_ _7"> </span>table<span class="_ _7"> </span>(vectored<span class="_ _34"> </span>mo<span class="_ _5"></span>de)<span class="_ _7"> </span>on<span class="_ _7"> </span>the<span class="_ _7"> </span><span class="ff5">mtvec<span class="_ _7"> </span></span>CSR.<span class="_ _7"> </span>Assuming<span class="_ _7"> </span>the</div><div class="t m0 x3f h1e y14e8 fff fsd fc0 sc0 ls0 ws0">10</div><div class="t m0 xc h1f y14e9 ff10 fse fc0 sc0 ls0 ws0">In<span class="_ _b"> </span>systems<span class="_ _b"> </span>with<span class="_ _34"> </span>multiple<span class="_ _3"> </span>privilege<span class="_ _34"> </span>mo<span class="_ _5"></span>des<span class="_ _b"> </span>(<span class="ff11">e.g.</span>,<span class="_ _7"> </span>Machine<span class="_ _3"> </span>and<span class="_ _34"> </span>User<span class="_ _b"> </span>mo<span class="_ _5"></span>des),<span class="_ _7"> </span>the<span class="_ _b"> </span><span class="ff28">mret<span class="_ _b"> </span></span>instruction<span class="_ _34"> </span>also<span class="_ _b"> </span>recov<span class="_ _27"></span>ers<span class="_ _34"> </span>the</div><div class="t m0 xf h1f y14ea ff10 fse fc0 sc0 ls0 ws0">privilege<span class="_ _38"> </span>mo<span class="_ _5"></span>de.</div><div class="t m0 x2c h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">Prin<span class="_ _1"></span>ted<span class="_ _2"> </span>v<span class="_ _1"></span>ersion<span class="_ _2"> </span>a<span class="_ _1"></span>v<span class="_ _27"></span>ailable<span class="_ _2"> </span>for<span class="_ _6"> </span>purchase<span class="_ _6"> </span>at<span class="_ _2"> </span>Amazon.com</div><div class="t m0 x2d h8 y13b ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _9"></span>ree<span class="_ _2"> </span>online<span class="_ _6"> </span>version<span class="_ _6"> </span>at<span class="_ _2"> </span><span class="ff5">http://riscv-<span class="_ _22"></span>programming.org</span></div><div class="t m0 x2e h8 y13c ff3 fs4 fc0 sc0 ls0 ws0">(Generated<span class="_ _2"> </span>on<span class="_ _2"> </span>Septem<span class="_ _1"></span>b<span class="_ _5"></span>er<span class="_ _6"> </span>17,<span class="_ _2"> </span>2025)</div><div class="t m0 x9c h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">130</div><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:121.002000px;bottom:720.132000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,494.865,null]'><div class="d m1" style="border-style:none;position:absolute;left:235.682000px;bottom:720.132000px;width:62.152000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,698.103,null]'><div class="d m1" style="border-style:none;position:absolute;left:87.881000px;bottom:696.221000px;width:107.313000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:505.813000px;bottom:696.221000px;width:18.459000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:194.529000px;bottom:672.311000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:505.813000px;bottom:672.311000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,468.88,null]'><div class="d m1" style="border-style:none;position:absolute;left:162.724000px;bottom:660.356000px;width:18.597000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,494.782,null]'><div class="d m1" style="border-style:none;position:absolute;left:439.762000px;bottom:660.356000px;width:22.056000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,494.782,null]'><div class="d m1" style="border-style:none;position:absolute;left:285.346000px;bottom:648.401000px;width:22.056000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:418.419000px;bottom:648.401000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,698.103,null]'><div class="d m1" style="border-style:none;position:absolute;left:223.773000px;bottom:635.892000px;width:107.877000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:505.813000px;bottom:623.937000px;width:18.459000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:505.813000px;bottom:612.259000px;width:18.459000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:438.472000px;bottom:600.580000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:103.298000px;bottom:588.071000px;width:18.458000px;height:11.956000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,494.782,null]'><div class="d m1" style="border-style:none;position:absolute;left:210.970000px;bottom:576.116000px;width:22.057000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:351.491000px;bottom:576.116000px;width:18.458000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:124.727000px;bottom:564.715000px;width:18.459000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:415.818000px;bottom:564.715000px;width:18.458000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,514.708,null]'><div class="d m1" style="border-style:none;position:absolute;left:102.778000px;bottom:266.929000px;width:23.440000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,411.096,null]'><div class="d m1" style="border-style:none;position:absolute;left:219.574000px;bottom:254.697000px;width:15.968000px;height:12.316000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf8f" data-dest-detail='[143,"XYZ",87.243,134.776,null]'><div class="d m1" style="border-style:none;position:absolute;left:511.071000px;bottom:254.697000px;width:10.433000px;height:12.316000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,436.999,null]'><div class="d m1" style="border-style:none;position:absolute;left:441.607000px;bottom:151.902000px;width:18.459000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,494.782,null]'><div class="d m1" style="border-style:none;position:absolute;left:434.301000px;bottom:139.947000px;width:22.056000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://a.co/d/gUfKWsD"><div class="d m1" style="border-style:none;position:absolute;left:358.258000px;bottom:69.067000px;width:58.171000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:271.722000px;bottom:56.835000px;width:148.940000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
