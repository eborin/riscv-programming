<div id="pf2a" class="pf w0 h0" data-page-no="2a"><div class="pc pc2a w0 h0"><img class="bi xf y74c w2 h78" alt="" src="bg2a.png"/><div class="t m0 xf h8 y10d ff3 fs4 fc0 sc0 ls0 ws0">3.1.<span class="_ _1f"> </span>GENERA<span class="_ _9"></span>TING<span class="_ _2"> </span>NA<span class="_ _9"></span>TIVE<span class="_ _2"> </span>PROGRAMS</div><div class="c x2a y74d w13 h79"><div class="t m0 x129 h7a y74e ff3d fs30 fc0 sc0 ls0 ws0">Assembler (<span class="ff3e">e.g.</span>, <span class="ff3f">as</span>)<span class="_ _8a"> </span>Assembler (<span class="ff3e">e.g.</span>, <span class="ff3f">as</span>)</div><div class="t m0 x1d h7a y74f ff3d fs30 fc0 sc0 ls0 ws0">Compiler (<span class="ff3e">e.g.</span>, <span class="ff3f">gcc</span>)</div><div class="t m0 x5e h7b y750 ff40 fs31 fc0 sc0 ls0 ws0">01010101</div><div class="t m0 x5e h7b y751 ff40 fs31 fc0 sc0 ls0 ws0">10001001</div><div class="t m0 x6d h7c y752 ff41 fs32 fc0 sc0 ls0 ws0">Machine language<span class="ff3d"> program</span></div><div class="t m0 x6d h7d y753 ff41 fs32 fc0 sc0 ls0 ws0">(object file - binary)</div><div class="t m0 xe1 h7a y74f ff3d fs30 fc0 sc0 ls0 ws0">Compiler (<span class="ff3e">e.g.</span>, <span class="ff3f">gcc</span>)</div><div class="t m0 x29 h7e y754 ff40 fs33 fc0 sc0 ls0 ws0">func:</div><div class="t m0 x29 h7e y755 ff40 fs33 fc0 sc0 ls0 ws0">  li a1, 113</div><div class="t m0 x29 h7e y756 ff40 fs33 fc0 sc0 ls0 ws0">  mul a0, a0, a1</div><div class="t m0 x29 h7e y757 ff40 fs33 fc0 sc0 ls0 ws0">  ret</div><div class="t m0 x6d h7c y758 ff41 fs32 fc0 sc0 ls0 ws0">Assembly language<span class="ff3d"> program</span></div><div class="t m0 x6d h7d y759 ff41 fs32 fc0 sc0 ls0 ws0">(text file)</div><div class="t m0 x29 h7e y75a ff40 fs33 fc0 sc0 ls0 ws0">int func(int a)</div><div class="t m0 x29 h7e y75b ff40 fs33 fc0 sc0 ls0 ws0">{</div><div class="t m0 x29 h7e y75c ff40 fs33 fc0 sc0 ls0 ws0">  return a*113;</div><div class="t m0 x29 h7e y75d ff40 fs33 fc0 sc0 ls0 ws0">}</div><div class="t m0 x6d h7c y75e ff41 fs32 fc0 sc0 ls0 ws0">High-level language<span class="ff3d"> program</span></div><div class="t m0 x6d h7c y75f ff3d fs32 fc0 sc0 ls0 ws0">(C, C++, Java, Pascal, ...)</div><div class="t m0 x6d h7d y760 ff41 fs32 fc0 sc0 ls0 ws0">(text file) </div><div class="t m0 x134 h7e y75a ff40 fs33 fc0 sc0 ls0 ws0">int main()</div><div class="t m0 x134 h7e y75b ff40 fs33 fc0 sc0 ls0 ws0">{</div><div class="t m0 x134 h7e y75c ff40 fs33 fc0 sc0 ls0 ws0">  return func (10);</div><div class="t m0 x134 h7e y75d ff40 fs33 fc0 sc0 ls0 ws0">}</div><div class="t m0 x111 h7e y754 ff40 fs33 fc0 sc0 ls0 ws0">main:</div><div class="t m0 x111 h7e y755 ff40 fs33 fc0 sc0 ls0 ws0">  li a0, 10</div><div class="t m0 x111 h7e y756 ff40 fs33 fc0 sc0 ls0 ws0">  jal func</div><div class="t m0 x111 h7e y757 ff40 fs33 fc0 sc0 ls0 ws0">  ret</div><div class="t m0 x135 h7b y750 ff40 fs31 fc0 sc0 ls0 ws0">01010101</div><div class="t m0 x135 h7b y751 ff40 fs31 fc0 sc0 ls0 ws0">10001001</div><div class="t m0 x136 h7c y761 ff41 fs32 fc0 sc0 ls0 ws0">Machine language<span class="ff3d"> program</span></div><div class="t m0 x136 h7d y762 ff41 fs32 fc0 sc0 ls0 ws0">(executable file - binary)</div><div class="t m0 xc h7a y763 ff3d fs30 fc0 sc0 ls0 ws0">Linker (<span class="ff3e">e.g.</span>, <span class="ff3f">ld</span>)</div><div class="t m0 x45 h7b y764 ff40 fs31 fc0 sc0 ls0 ws0">01010101</div><div class="t m0 x45 h7b y765 ff40 fs31 fc0 sc0 ls0 ws0">10001001</div></div><div class="t m0 x127 h8 y766 ff3 fs4 fc0 sc0 ls0 ws0">Figure<span class="_ _2"> </span>3.1:<span class="_ _7"> </span>Nativ<span class="_ _1"></span>e<span class="_ _2"> </span>co<span class="_ _5"></span>de<span class="_ _6"> </span>generation<span class="_ _2"> </span>ﬂow.</div><div class="t m0 xc h8 y767 ff3 fs4 fc0 sc0 ls0 ws0">The follo<span class="_ _27"></span>wing command line<span class="_ _a"> </span>illustrates ho<span class="_ _27"></span>w the <span class="ff5">riscv64-unknown-elf-ld<span class="_ _a"> </span></span>to<span class="_ _5"></span>ol, a v<span class="_ _27"></span>ersion of the GNU</div><div class="t m0 xf h8 y768 ff3 fs4 fc0 sc0 ls0 ws0">Link<span class="_ _1"></span>er</div><div class="t m0 xde h12 y769 ffc fs7 fc0 sc0 ls0 ws0">3</div><div class="t m0 xbe h8 y768 ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _5"></span>ol<span class="_ _b"> </span>that<span class="_ _3"> </span>links<span class="_ _b"> </span>ob<span class="_ _22"></span>ject<span class="_ _b"> </span>ﬁles<span class="_ _b"> </span>generated<span class="_ _3"> </span>for<span class="_ _b"> </span>RISC-V<span class="_ _b"> </span>ISAs,<span class="_ _b"> </span>can<span class="_ _b"> </span>b<span class="_ _5"></span>e<span class="_ _b"> </span>inv<span class="_ _27"></span>oked<span class="_ _3"> </span>to<span class="_ _b"> </span>link<span class="_ _b"> </span>t<span class="_ _1"></span>w<span class="_ _1"></span>o<span class="_ _b"> </span>ob<span class="_ _5"></span>ject<span class="_ _b"> </span>ﬁles</div><div class="t m0 xf h8 y76a ff3 fs4 fc0 sc0 ls0 ws0">together:<span class="_ _4"> </span>the<span class="_ _3"> </span><span class="ff5">main.o<span class="_ _b"> </span></span>and<span class="_ _3"> </span><span class="ff5">mylib.o<span class="_ _b"> </span></span>ob<span class="_ _22"></span>ject<span class="_ _3"> </span>ﬁles.<span class="_ _2a"> </span>In<span class="_ _b"> </span>this<span class="_ _3"> </span>example,<span class="_ _b"> </span>the<span class="_ _b"> </span>link<span class="_ _1"></span>er<span class="_ _3"> </span>will<span class="_ _b"> </span>pro<span class="_ _5"></span>duce<span class="_ _3"> </span>an<span class="_ _b"> </span>executable</div><div class="t m0 xf h8 y76b ff3 fs4 fc0 sc0 ls0 ws0">ﬁle<span class="_ _2"> </span>named<span class="_ _2"> </span><span class="ff5">main.x</span>.</div><div class="t m0 xf h9 y76c ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-ld<span class="_ _4"> </span>-m<span class="_ _4"> </span>elf32lriscv<span class="_ _4"> </span>main.o<span class="_ _4"> </span>mylib.o<span class="_ _18"> </span>-o<span class="_ _4"> </span>main.x</div><div class="t m0 xc h8 y76d ff3 fs4 fc0 sc0 ls0 ws0">Figure<span class="_ _3"> </span>3.1<span class="_ _b"> </span>illustrates<span class="_ _3"> </span>the<span class="_ _b"> </span>co<span class="_ _5"></span>de<span class="_ _b"> </span>generation<span class="_ _3"> </span>pro<span class="_ _5"></span>cess<span class="_ _b"> </span>used<span class="_ _3"> </span>to<span class="_ _b"> </span>pro<span class="_ _5"></span>duce<span class="_ _3"> </span>a<span class="_ _b"> </span>native<span class="_ _2"> </span>program<span class="_ _b"> </span>executable<span class="_ _b"> </span>ﬁle</div><div class="t m0 xf h8 y76e ff3 fs4 fc0 sc0 ls0 ws0">from<span class="_ _b"> </span>a<span class="_ _b"> </span>C<span class="_ _34"> </span>program<span class="_ _b"> </span>organized<span class="_ _34"> </span>in<span class="_ _b"> </span>tw<span class="_ _27"></span>o<span class="_ _b"> </span>ﬁles.<span class="_ _39"> </span>First,<span class="_ _34"> </span>the<span class="_ _b"> </span>tw<span class="_ _27"></span>o<span class="_ _34"> </span>C<span class="_ _b"> </span>program<span class="_ _b"> </span>ﬁles<span class="_ _34"> </span>are<span class="_ _b"> </span>translated<span class="_ _34"> </span>into<span class="_ _3"> </span>assembly</div><div class="t m0 xf h8 y76f ff3 fs4 fc0 sc0 ls0 ws0">programs b<span class="_ _27"></span>y the compiler.<span class="_ _b"> </span>Then, the assem<span class="_ _27"></span>bly programs are<span class="_ _a"> </span>assembled<span class="_ _a"> </span>by<span class="_ _a"> </span>the assem<span class="_ _27"></span>bler, which<span class="_ _a"> </span>pro<span class="_ _5"></span>duces</div><div class="t m0 xf h8 y770 ff3 fs4 fc0 sc0 ls0 ws0">ob<span class="_ _22"></span>ject<span class="_ _6"> </span>ﬁles.<span class="_ _7"> </span>Finally<span class="_ _9"></span>,<span class="_ _2"> </span>the<span class="_ _2"> </span>linker<span class="_ _6"> </span>links<span class="_ _2"> </span>the<span class="_ _2"> </span>ob<span class="_ _22"></span>ject<span class="_ _6"> </span>ﬁles<span class="_ _2"> </span>together<span class="_ _2"> </span>pro<span class="_ _5"></span>ducing<span class="_ _2"> </span>an<span class="_ _2"> </span>executable<span class="_ _2"> </span>ﬁle.</div><div class="t m0 xc h8 y771 ff3 fs4 fc0 sc0 ls0 ws0">Assuming the<span class="_ _35"> </span>high-level<span class="_ _a"> </span>language program<span class="_ _a"> </span>ﬁles are<span class="_ _a"> </span>named <span class="ff5">main.c<span class="_ _a"> </span></span>and <span class="ff5">func.c</span>,<span class="_ _a"> </span>the follo<span class="_ _27"></span>wing sequence</div><div class="t m0 xf h8 y772 ff3 fs4 fc0 sc0 ls0 ws0">of<span class="_ _2"> </span>commands<span class="_ _2"> </span>pro<span class="_ _5"></span>duce<span class="_ _6"> </span>a<span class="_ _2"> </span>R<span class="_ _12"></span>V32I<span class="_ _2"> </span>executable<span class="_ _2"> </span>ﬁle<span class="_ _2"> </span>named<span class="_ _2"> </span><span class="ff5">main.x</span>.</div><div class="t m0 xf h9 y773 ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-gcc<span class="_ _4"> </span>-mabi=ilp32<span class="_ _4"> </span>-march=rv32i<span class="_ _4"> </span>-S<span class="_ _4"> </span>main.c<span class="_ _18"> </span>-o<span class="_ _4"> </span>main.s</div><div class="t m0 xf h9 y774 ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-as<span class="_ _4"> </span>-mabi=ilp32<span class="_ _4"> </span>-march=rv32i<span class="_ _4"> </span>main.s<span class="_ _4"> </span>-o<span class="_ _18"> </span>main.o</div><div class="t m0 xf h9 y775 ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-gcc<span class="_ _4"> </span>-mabi=ilp32<span class="_ _4"> </span>-march=rv32i<span class="_ _4"> </span>-S<span class="_ _4"> </span>func.c<span class="_ _18"> </span>-o<span class="_ _4"> </span>func.s</div><div class="t m0 xf h9 y776 ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-as<span class="_ _4"> </span>-mabi=ilp32<span class="_ _4"> </span>-march=rv32i<span class="_ _4"> </span>func.s<span class="_ _4"> </span>-o<span class="_ _18"> </span>func.o</div><div class="t m0 xf h9 y777 ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-ld<span class="_ _4"> </span>-m<span class="_ _4"> </span>elf32lriscv<span class="_ _4"> </span>main.o<span class="_ _4"> </span>func.o<span class="_ _18"> </span>-o<span class="_ _4"> </span>main.x</div><div class="t m0 xf hb y778 ff6 fs6 fc0 sc0 ls0 ws0">3.1.1<span class="_ _11"> </span>Insp<span class="_ _5"></span>ecting<span class="_ _7"> </span>the<span class="_ _7"> </span>conten<span class="_ _27"></span>ts<span class="_ _7"> </span>of<span class="_ _7"> </span>ob<span class="_ _22"></span>ject<span class="_ _24"> </span>and<span class="_ _7"> </span>executable<span class="_ _7"> </span>ﬁles</div><div class="t m0 xf h8 y779 ff3 fs4 fc0 sc0 ls0 ws0">Ob<span class="_ _22"></span>ject<span class="_ _b"> </span>and<span class="_ _b"> </span>executable<span class="_ _b"> </span>ﬁles<span class="_ _b"> </span>are<span class="_ _34"> </span>enco<span class="_ _5"></span>ded<span class="_ _b"> </span>as<span class="_ _34"> </span>binary<span class="_ _b"> </span>ﬁles,<span class="_ _34"> </span>hence,<span class="_ _34"> </span>it<span class="_ _b"> </span>is<span class="_ _34"> </span>not<span class="_ _b"> </span>easy<span class="_ _34"> </span>to<span class="_ _b"> </span>lo<span class="_ _5"></span>ok<span class="_ _b"> </span>at<span class="_ _34"> </span>their<span class="_ _b"> </span>conten<span class="_ _27"></span>ts</div><div class="t m0 xf h8 y77a ff3 fs4 fc0 sc0 ls0 ws0">directly<span class="_ _9"></span>.<span class="_ _7"> </span>T<span class="_ _9"></span>o<span class="_ _3"> </span>insp<span class="_ _5"></span>ect<span class="_ _2"> </span>their<span class="_ _2"> </span>conten<span class="_ _27"></span>ts,<span class="_ _3"> </span>dev<span class="_ _1"></span>elop<span class="_ _5"></span>ers<span class="_ _2"> </span>usually<span class="_ _2"> </span>rely<span class="_ _2"> </span>on<span class="_ _3"> </span>programs<span class="_ _2"> </span>that<span class="_ _2"> </span>deco<span class="_ _5"></span>de<span class="_ _2"> </span>and<span class="_ _3"> </span>translate<span class="_ _2"> </span>their</div><div class="t m0 xf h8 y77b ff3 fs4 fc0 sc0 ls0 ws0">information<span class="_ _2"> </span>to<span class="_ _3"> </span>a<span class="_ _3"> </span>h<span class="_ _27"></span>uman-readable<span class="_ _3"> </span>representation,<span class="_ _2"> </span>usually<span class="_ _3"> </span>a<span class="_ _2"> </span>textual<span class="_ _3"> </span>format.<span class="_ _18"> </span>There<span class="_ _2"> </span>are<span class="_ _3"> </span>several<span class="_ _2"> </span>to<span class="_ _5"></span>ols<span class="_ _2"> </span>that</div><div class="t m0 xf h8 y77c ff3 fs4 fc0 sc0 ls0 ws0">can<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _2"> </span>used<span class="_ _2"> </span>to<span class="_ _2"> </span>insp<span class="_ _5"></span>ect<span class="_ _2"> </span>the<span class="_ _2"> </span>conten<span class="_ _27"></span>ts<span class="_ _2"> </span>of<span class="_ _2"> </span>ob<span class="_ _22"></span>ject<span class="_ _2"> </span>and<span class="_ _2"> </span>executable<span class="_ _2"> </span>ﬁles.<span class="_ _7"> </span>The<span class="_ _2"> </span><span class="ff5">objdump</span>,<span class="_ _2"> </span><span class="ff5">nm</span>,<span class="_ _2"> </span>and<span class="_ _2"> </span><span class="ff5">readelf<span class="_ _2"> </span></span>to<span class="_ _5"></span>ols</div><div class="t m0 x2b h1e y77d fff fsd fc0 sc0 ls0 ws0">3</div><div class="t m0 xc h47 y77e ff28 fse fc0 sc0 ls0 ws0">https://www.gnu.org/software/binutils/</div><div class="t m0 x2c h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">Prin<span class="_ _1"></span>ted<span class="_ _2"> </span>v<span class="_ _1"></span>ersion<span class="_ _2"> </span>a<span class="_ _1"></span>v<span class="_ _27"></span>ailable<span class="_ _2"> </span>for<span class="_ _6"> </span>purchase<span class="_ _6"> </span>at<span class="_ _2"> </span>Amazon.com</div><div class="t m0 x2d h8 y143 ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _9"></span>ree<span class="_ _2"> </span>online<span class="_ _6"> </span>version<span class="_ _6"> </span>at<span class="_ _2"> </span><span class="ff5">http://riscv-<span class="_ _22"></span>programming.org</span></div><div class="t m0 x2e h8 y144 ff3 fs4 fc0 sc0 ls0 ws0">(Generated<span class="_ _2"> </span>on<span class="_ _2"> </span>August<span class="_ _6"> </span>28,<span class="_ _2"> </span>2024)</div><div class="t m0 xb8 h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">29</div><a class="l" href="#pf2a" data-dest-detail='[42,"XYZ",87.243,121.279,null]'><div class="d m1" style="border-style:none;position:absolute;left:98.844000px;bottom:406.130000px;width:6.462000px;height:12.040000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,468.88,null]'><div class="d m1" style="border-style:none;position:absolute;left:325.553000px;bottom:406.130000px;width:18.597000px;height:12.040000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf2a" data-dest-detail='[42,"XYZ",72,739.005,null]'><div class="d m1" style="border-style:none;position:absolute;left:117.850000px;bottom:338.384000px;width:14.722000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",72,450.279,null]'><div class="d m1" style="border-style:none;position:absolute;left:389.380000px;bottom:338.384000px;width:68.930000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://www.gnu.org/software/binutils/"><div class="d m1" style="border-style:none;position:absolute;left:86.247000px;bottom:107.979000px;width:162.891000px;height:11.497000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://a.co/d/gUfKWsD"><div class="d m1" style="border-style:none;position:absolute;left:358.258000px;bottom:69.067000px;width:58.171000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:271.722000px;bottom:56.835000px;width:148.940000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
