<div id="pf41" class="pf w0 h0" data-page-no="41"><div class="pc pc41 w0 h0"><img class="bi xf ya3f w2 h9e" alt="" src="bg41.png"/><div class="t m0 xf h8 y105 ff3 fs4 fc0 sc0 ls0 ws0">4.7.<span class="_ _1f"> </span>ASSEMBL<span class="_ _9"></span>Y<span class="_ _2"> </span>DIRECTIVES</div><div class="t m0 xc h8 ya40 ff7 fs4 fc0 sc0 ls0 ws0">NOTE:<span class="_ _20"> </span><span class="ff3">The R<span class="_ _12"></span>V32I GNU assem<span class="_ _27"></span>bler also contains<span class="_ _a"> </span>the “<span class="ff5">.text</span>”, “<span class="ff5">.data</span>”,<span class="_ _38"> </span>and “<span class="ff5">.bss</span>” directives,</span></div><div class="t m0 xc h8 ya41 ff3 fs4 fc0 sc0 ls0 ws0">whic<span class="_ _1"></span>h<span class="_ _a"> </span>are<span class="_ _a"> </span>aliases<span class="_ _a"> </span>to<span class="_ _a"> </span>“<span class="ff5">.section<span class="_ _4"> </span>.text</span>”, “<span class="ff5">.section<span class="_ _18"> </span>.data</span>”, and<span class="_ _35"> </span>the<span class="_ _a"> </span>“<span class="ff5">.section<span class="_ _4"> </span>.bss</span>”<span class="_ _a"> </span>directives,</div><div class="t m0 xc h8 ya42 ff3 fs4 fc0 sc0 ls0 ws0">resp<span class="_ _5"></span>ectiv<span class="_ _1"></span>ely<span class="_ _9"></span>.</div><div class="t m0 xf hb ya43 ff6 fs6 fc0 sc0 ls0 ws0">4.7.3<span class="_ _11"> </span>Allo<span class="_ _5"></span>cating<span class="_ _7"> </span>v<span class="_ _9"></span>ariables<span class="_ _24"> </span>on<span class="_ _7"> </span>the<span class="_ _7"> </span><span class="ff2">.bss<span class="_ _7"> </span></span>section</div><div class="t m0 xf h8 ya44 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _24"> </span><span class="ff5">.bss<span class="_ _24"> </span></span>section<span class="_ _24"> </span>is<span class="_ _24"> </span>dedicated<span class="_ _24"> </span>for<span class="_ _24"> </span>storing<span class="_ _24"> </span>uninitialized<span class="_ _24"> </span>global<span class="_ _24"> </span>v<span class="_ _27"></span>ariables.<span class="_ _1e"> </span>These<span class="_ _24"> </span>v<span class="_ _27"></span>ariables<span class="_ _24"> </span>need<span class="_ _24"> </span>to<span class="_ _24"> </span>b<span class="_ _5"></span>e</div><div class="t m0 xf h8 ya45 ff3 fs4 fc0 sc0 ls0 ws0">allo<span class="_ _5"></span>cated<span class="_ _2"> </span>on<span class="_ _2"> </span>memory<span class="_ _9"></span>,<span class="_ _3"> </span>but<span class="_ _2"> </span>they<span class="_ _2"> </span>do<span class="_ _3"> </span>not<span class="_ _2"> </span>need<span class="_ _2"> </span>to<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _3"> </span>initialized<span class="_ _2"> </span>by<span class="_ _6"> </span>the<span class="_ _3"> </span>loader<span class="_ _2"> </span>when<span class="_ _2"> </span>a<span class="_ _3"> </span>program<span class="_ _2"> </span>is<span class="_ _2"> </span>executed.</div><div class="t m0 xf h8 ya46 ff3 fs4 fc0 sc0 ls0 ws0">As<span class="_ _2"> </span>a<span class="_ _2"> </span>consequence,<span class="_ _6"> </span>their<span class="_ _2"> </span>initial<span class="_ _2"> </span>v<span class="_ _27"></span>alue<span class="_ _2"> </span>do<span class="_ _2"> </span>not<span class="_ _2"> </span>need<span class="_ _2"> </span>to<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _2"> </span>stored<span class="_ _2"> </span>on<span class="_ _2"> </span>executable<span class="_ _2"> </span>nor<span class="_ _2"> </span>ob<span class="_ _22"></span>ject<span class="_ _2"> </span>ﬁles.</div><div class="t m0 xc h8 ya47 ff3 fs4 fc0 sc0 ls0 ws0">Since<span class="_ _6"> </span>no<span class="_ _6"> </span>information<span class="_ _38"> </span>is<span class="_ _6"> </span>stored<span class="_ _6"> </span>on<span class="_ _6"> </span>the<span class="_ _6"> </span><span class="ff5">.bss<span class="_ _6"> </span></span>section<span class="_ _6"> </span>in<span class="_ _6"> </span>ob<span class="_ _22"></span>ject<span class="_ _6"> </span>and<span class="_ _6"> </span>executable<span class="_ _6"> </span>ﬁles,<span class="_ _6"> </span>the<span class="_ _6"> </span>GNU<span class="_ _6"> </span>assembler</div><div class="t m0 xf h8 ya48 ff3 fs4 fc0 sc0 ls0 ws0">do<span class="_ _5"></span>es<span class="_ _3"> </span>not<span class="_ _b"> </span>allow<span class="_ _3"> </span>assembly<span class="_ _3"> </span>programs<span class="_ _b"> </span>to<span class="_ _3"> </span>add<span class="_ _b"> </span>data<span class="_ _b"> </span>to<span class="_ _b"> </span>the<span class="_ _3"> </span><span class="ff5">.bss<span class="_ _b"> </span></span>section.<span class="_ _1c"> </span>T<span class="_ _9"></span>o<span class="_ _b"> </span>illustrate<span class="_ _b"> </span>this<span class="_ _3"> </span>situation,<span class="_ _34"> </span>let<span class="_ _3"> </span>us</div><div class="t m0 xf h8 ya49 ff3 fs4 fc0 sc0 ls0 ws0">consider<span class="_ _2"> </span>the<span class="_ _2"> </span>follo<span class="_ _1"></span>wing<span class="_ _6"> </span>co<span class="_ _5"></span>de<span class="_ _2"> </span>and<span class="_ _2"> </span>assume<span class="_ _2"> </span>it<span class="_ _2"> </span>is<span class="_ _2"> </span>stored<span class="_ _2"> </span>on<span class="_ _2"> </span>a<span class="_ _2"> </span>ﬁle<span class="_ _2"> </span>named<span class="_ _2"> </span><span class="ff5">data-on-bss.s</span>:</div><div class="t m0 x116 h9 ya4a ff22 fs11 fc0 sc0 ls0 ws0">1<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.bss</span></div><div class="t m0 x116 h9 ya4b ff22 fs11 fc0 sc0 ls0 ws0">2<span class="_ _2a"> </span><span class="ff5 fs4">x:<span class="_ _4"> </span>.word<span class="_ _18"> </span>10</span></div><div class="t m0 x116 h9 ya4c ff22 fs11 fc0 sc0 ls0 ws0">3<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.text</span></div><div class="t m0 x116 h9 ya4d ff22 fs11 fc0 sc0 ls0 ws0">4<span class="_ _2a"> </span><span class="ff5 fs4">set_x:</span></div><div class="t m0 x116 h9 ya4e ff22 fs11 fc0 sc0 ls0 ws0">5<span class="_ _37"> </span><span class="ff5 fs4">la<span class="_ _18"> </span>t1,<span class="_ _4"> </span>x</span></div><div class="t m0 x116 h9 ya4f ff22 fs11 fc0 sc0 ls0 ws0">6<span class="_ _37"> </span><span class="ff5 fs4">sw<span class="_ _18"> </span>a0,<span class="_ _4"> </span>(t1)</span></div><div class="t m0 x116 h9 ya50 ff22 fs11 fc0 sc0 ls0 ws0">7<span class="_ _37"> </span><span class="ff5 fs4">ret</span></div><div class="t m0 xc h8 ya51 ff3 fs4 fc0 sc0 ls0 ws0">This co<span class="_ _5"></span>de<span class="_ _6"> </span>is<span class="_ _6"> </span>trying to<span class="_ _6"> </span>use<span class="_ _6"> </span>the<span class="_ _6"> </span><span class="ff5">.word<span class="_ _18"> </span>10<span class="_ _6"> </span></span>directive to<span class="_ _6"> </span>add a<span class="_ _6"> </span>32-bit<span class="_ _6"> </span>v<span class="_ _27"></span>alue<span class="_ _38"> </span>to<span class="_ _6"> </span>the<span class="_ _6"> </span><span class="ff5">.bss<span class="_ _38"> </span></span>section.<span class="_ _7"> </span>How<span class="_ _27"></span>ever,</div><div class="t m0 xf h8 ya52 ff3 fs4 fc0 sc0 ls0 ws0">when<span class="_ _3"> </span>pro<span class="_ _5"></span>cessing<span class="_ _b"> </span>the<span class="_ _b"> </span><span class="ff5">.word<span class="_ _4"> </span>10<span class="_ _3"> </span></span>directive,<span class="_ _b"> </span>the<span class="_ _b"> </span>GNU<span class="_ _3"> </span>assembler<span class="_ _3"> </span>stops<span class="_ _b"> </span>assembling<span class="_ _3"> </span>the<span class="_ _b"> </span>co<span class="_ _5"></span>de<span class="_ _3"> </span>and<span class="_ _b"> </span>emits<span class="_ _b"> </span>the</div><div class="t m0 xf h8 ya53 ff3 fs4 fc0 sc0 ls0 ws0">follo<span class="_ _1"></span>wing<span class="_ _2"> </span>error<span class="_ _2"> </span>message:</div><div class="t m0 xf h9 ya54 ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-as<span class="_ _4"> </span>-march=rv32im<span class="_ _4"> </span>data-on-bss.s<span class="_ _4"> </span>-o<span class="_ _4"> </span>data-on-bss.o</div><div class="t m0 xf h9 ya55 ff5 fs4 fc0 sc0 ls0 ws0">data-on-bss.s:<span class="_ _18"> </span>Assembler<span class="_ _4"> </span>messages:</div><div class="t m0 xf h9 ya56 ff5 fs4 fc0 sc0 ls0 ws0">data-on-bss.s:2:<span class="_ _18"> </span>Error:<span class="_ _4"> </span>attempt<span class="_ _4"> </span>to<span class="_ _4"> </span>store<span class="_ _4"> </span>non-zero<span class="_ _18"> </span>value<span class="_ _4"> </span>in<span class="_ _4"> </span>section</div><div class="t m0 x10b h9 ya57 ff5 fs4 fc0 sc0 ls0 ws0">‘.bss’</div><div class="t m0 xc h8 ya58 ff3 fs4 fc0 sc0 ls0 ws0">T<span class="_ _9"></span>o<span class="_ _b"> </span>allo<span class="_ _5"></span>cate<span class="_ _34"> </span>v<span class="_ _27"></span>ariables<span class="_ _34"> </span>on<span class="_ _34"> </span>the<span class="_ _34"> </span><span class="ff5">.bss<span class="_ _34"> </span></span>section<span class="_ _b"> </span>it<span class="_ _34"> </span>suﬃces<span class="_ _34"> </span>to<span class="_ _34"> </span>declare<span class="_ _34"> </span>a<span class="_ _34"> </span>lab<span class="_ _5"></span>el<span class="_ _34"> </span>to<span class="_ _b"> </span>identify<span class="_ _b"> </span>the<span class="_ _34"> </span>v<span class="_ _27"></span>ariable<span class="_ _34"> </span>and</div><div class="t m0 xf h8 ya59 ff3 fs4 fc0 sc0 ls0 ws0">adv<span class="_ _27"></span>ance<span class="_ _2"> </span>the<span class="_ _3"> </span><span class="ff5">.bss<span class="_ _2"> </span></span>lo<span class="_ _5"></span>cation<span class="_ _3"> </span>coun<span class="_ _1"></span>ter<span class="_ _2"> </span>by<span class="_ _2"> </span>the<span class="_ _2"> </span>amount<span class="_ _2"> </span>of<span class="_ _2"> </span>bytes<span class="_ _2"> </span>the<span class="_ _2"> </span>v<span class="_ _27"></span>ariable<span class="_ _3"> </span>require,<span class="_ _2"> </span>so<span class="_ _3"> </span>further<span class="_ _2"> </span>v<span class="_ _27"></span>ariables<span class="_ _3"> </span>are</div><div class="t m0 xf h8 ya5a ff3 fs4 fc0 sc0 ls0 ws0">allo<span class="_ _5"></span>cated<span class="_ _6"> </span>on<span class="_ _2"> </span>other<span class="_ _2"> </span>address.</div><div class="t m0 xc h8 ya5b ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _3"> </span><span class="ff5">.skip<span class="_ _18"> </span>N<span class="_ _3"> </span></span>directive<span class="_ _2"> </span>is<span class="_ _3"> </span>a<span class="_ _3"> </span>directive<span class="_ _2"> </span>that<span class="_ _3"> </span>adv<span class="_ _27"></span>ances<span class="_ _3"> </span>the<span class="_ _3"> </span>lo<span class="_ _5"></span>cation<span class="_ _3"> </span>coun<span class="_ _1"></span>ter<span class="_ _2"> </span>by<span class="_ _3"> </span><span class="ff5">N<span class="_ _3"> </span></span>units<span class="_ _3"> </span>and<span class="_ _3"> </span>can<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _3"> </span>used</div><div class="t m0 xf h8 y3a9 ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _3"> </span>allo<span class="_ _5"></span>cate<span class="_ _b"> </span>space<span class="_ _3"> </span>for<span class="_ _b"> </span>v<span class="_ _27"></span>ariables<span class="_ _3"> </span>on<span class="_ _b"> </span>the<span class="_ _3"> </span><span class="ff5">.bss<span class="_ _b"> </span></span>section.<span class="_ _2a"> </span>The<span class="_ _b"> </span>following<span class="_ _2"> </span>co<span class="_ _5"></span>de<span class="_ _b"> </span>shows<span class="_ _2"> </span>how<span class="_ _3"> </span>the<span class="_ _b"> </span><span class="ff5">.skip<span class="_ _3"> </span></span>directive</div><div class="t m0 xf h8 ya5c ff3 fs4 fc0 sc0 ls0 ws0">can<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _2"> </span>combined<span class="_ _6"> </span>with<span class="_ _3"> </span>lab<span class="_ _5"></span>els<span class="_ _2"> </span>to<span class="_ _2"> </span>allo<span class="_ _5"></span>cate<span class="_ _2"> </span>space<span class="_ _3"> </span>for<span class="_ _2"> </span>three<span class="_ _2"> </span>distinct<span class="_ _3"> </span>v<span class="_ _27"></span>ariables:<span class="_ _7"> </span><span class="ff5">x</span>,<span class="_ _3"> </span><span class="ff5">V</span>,<span class="_ _2"> </span>and<span class="_ _2"> </span><span class="ff5">y</span>.<span class="_ _24"> </span>In<span class="_ _2"> </span>this<span class="_ _3"> </span>example,</div><div class="t m0 xf h8 ya5d ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _3"> </span>program<span class="_ _3"> </span>is<span class="_ _b"> </span>allo<span class="_ _5"></span>cating<span class="_ _3"> </span>4<span class="_ _3"> </span>bytes<span class="_ _3"> </span>for<span class="_ _3"> </span>v<span class="_ _27"></span>ariables<span class="_ _3"> </span>x<span class="_ _b"> </span>and<span class="_ _3"> </span>y<span class="_ _3"> </span>and<span class="_ _b"> </span>80<span class="_ _3"> </span>bytes<span class="_ _3"> </span>for<span class="_ _3"> </span>v<span class="_ _27"></span>ariable<span class="_ _3"> </span>V.<span class="_ _b"> </span>As<span class="_ _3"> </span>a<span class="_ _3"> </span>consequence,</div><div class="t m0 xf h8 ya5e ff3 fs4 fc0 sc0 ls0 ws0">lab<span class="_ _5"></span>els<span class="_ _6"> </span><span class="ff5">x</span>,<span class="_ _2"> </span><span class="ff5">V</span>,<span class="_ _2"> </span>and<span class="_ _2"> </span><span class="ff5">y<span class="_ _2"> </span></span>will<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _2"> </span>asso<span class="_ _5"></span>ciated<span class="_ _2"> </span>with<span class="_ _2"> </span>addresses<span class="_ _2"> </span><span class="ff5">0x0</span>,<span class="_ _2"> </span><span class="ff5">0x4</span>,<span class="_ _2"> </span>and<span class="_ _2"> </span><span class="ff5">0x54</span>,<span class="_ _2"> </span>resp<span class="_ _5"></span>ectively<span class="_ _12"></span>.</div><div class="t m0 x116 h9 ya5f ff22 fs11 fc0 sc0 ls0 ws0">1<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.bss</span></div><div class="t m0 x116 h9 ya60 ff22 fs11 fc0 sc0 ls0 ws0">2<span class="_ _2a"> </span><span class="ff5 fs4">x:<span class="_ _4"> </span>.skip<span class="_ _18"> </span>4</span></div><div class="t m0 x116 h9 ya61 ff22 fs11 fc0 sc0 ls0 ws0">3<span class="_ _2a"> </span><span class="ff5 fs4">V:<span class="_ _4"> </span>.skip<span class="_ _18"> </span>80</span></div><div class="t m0 x116 h9 ya62 ff22 fs11 fc0 sc0 ls0 ws0">4<span class="_ _2a"> </span><span class="ff5 fs4">y:<span class="_ _4"> </span>.skip<span class="_ _18"> </span>4</span></div><div class="t m0 xc h8 ya63 ff7 fs4 fc0 sc0 ls0 ws0">NOTE:<span class="_ _20"> </span><span class="ff3">Some<span class="_ _2"> </span>systems<span class="_ _2"> </span>assume<span class="_ _2"> </span>that<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">.bss<span class="_ _2"> </span></span>section<span class="_ _2"> </span>will<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _2"> </span>initialized<span class="_ _2"> </span>with<span class="_ _2"> </span>zeros<span class="_ _2"> </span>by<span class="_ _6"> </span>the<span class="_ _2"> </span>op<span class="_ _5"></span>er-</span></div><div class="t m0 xc h8 ya64 ff3 fs4 fc0 sc0 ls0 ws0">ating<span class="_ _38"> </span>system<span class="_ _6"> </span>when<span class="_ _6"> </span>the<span class="_ _6"> </span>program<span class="_ _6"> </span>is<span class="_ _6"> </span>loaded<span class="_ _6"> </span>into memory<span class="_ _9"></span>.<span class="_ _7"> </span>These<span class="_ _6"> </span>systems<span class="_ _6"> </span>allow the<span class="_ _6"> </span>compiler<span class="_ _6"> </span>(or<span class="_ _6"> </span>the</div><div class="t m0 xc h8 ya65 ff3 fs4 fc0 sc0 ls0 ws0">programmer)<span class="_ _3"> </span>to<span class="_ _3"> </span>allo<span class="_ _5"></span>cate<span class="_ _3"> </span>zero-initialized<span class="_ _3"> </span>v<span class="_ _27"></span>ariables<span class="_ _b"> </span>in<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">.bss<span class="_ _3"> </span></span>section.<span class="_ _2a"> </span>As<span class="_ _3"> </span>a<span class="_ _3"> </span>result,<span class="_ _b"> </span>uninitialized</div><div class="t m0 xc h8 ya66 ff3 fs4 fc0 sc0 ls0 ws0">global<span class="_ _3"> </span>v<span class="_ _27"></span>ariables<span class="_ _3"> </span>will<span class="_ _3"> </span>b<span class="_ _5"></span>e<span class="_ _b"> </span>initialized<span class="_ _3"> </span>with<span class="_ _3"> </span>zero<span class="_ _3"> </span>b<span class="_ _5"></span>efore<span class="_ _3"> </span>the<span class="_ _b"> </span>program<span class="_ _3"> </span>starts.<span class="_ _4"> </span>How<span class="_ _27"></span>ever,<span class="_ _3"> </span>it’s<span class="_ _3"> </span>imp<span class="_ _5"></span>ortant</div><div class="t m0 xc h8 ya67 ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _6"> </span>note<span class="_ _2"> </span>that<span class="_ _2"> </span>this<span class="_ _2"> </span>b<span class="_ _5"></span>ehavior<span class="_ _6"> </span>is<span class="_ _2"> </span>not<span class="_ _2"> </span>guaranteed<span class="_ _6"> </span>across<span class="_ _2"> </span>all<span class="_ _6"> </span>systems.<span class="_ _7"> </span>Programmers<span class="_ _2"> </span>should<span class="_ _2"> </span>not<span class="_ _2"> </span>rely<span class="_ _2"> </span>on</div><div class="t m0 xc h8 ya68 ff3 fs4 fc0 sc0 ls0 ws0">uninitialized<span class="_ _2"> </span>v<span class="_ _27"></span>ariables<span class="_ _2"> </span>in<span class="_ _6"> </span>the<span class="_ _2"> </span><span class="ff5">.bss<span class="_ _2"> </span></span>section<span class="_ _2"> </span>b<span class="_ _5"></span>eing<span class="_ _2"> </span>automatically<span class="_ _2"> </span>initialized<span class="_ _2"> </span>with<span class="_ _2"> </span>zeros.</div><div class="t m0 x2c h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">Prin<span class="_ _1"></span>ted<span class="_ _2"> </span>v<span class="_ _1"></span>ersion<span class="_ _2"> </span>a<span class="_ _1"></span>v<span class="_ _27"></span>ailable<span class="_ _2"> </span>for<span class="_ _6"> </span>purchase<span class="_ _6"> </span>at<span class="_ _2"> </span>Amazon.com</div><div class="t m0 x2d h8 y13b ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _9"></span>ree<span class="_ _2"> </span>online<span class="_ _6"> </span>version<span class="_ _6"> </span>at<span class="_ _2"> </span><span class="ff5">http://riscv-<span class="_ _22"></span>programming.org</span></div><div class="t m0 x2e h8 y13c ff3 fs4 fc0 sc0 ls0 ws0">(Generated<span class="_ _2"> </span>on<span class="_ _2"> </span>Septem<span class="_ _1"></span>b<span class="_ _5"></span>er<span class="_ _6"> </span>17,<span class="_ _2"> </span>2025)</div><div class="t m0 xb8 h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">52</div><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,552.649,null]'><div class="d m1" style="border-style:none;position:absolute;left:352.535000px;bottom:449.252000px;width:14.169000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://a.co/d/gUfKWsD"><div class="d m1" style="border-style:none;position:absolute;left:358.258000px;bottom:69.067000px;width:58.171000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:271.722000px;bottom:56.835000px;width:148.940000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
