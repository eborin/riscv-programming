<div id="pf31" class="pf w0 h0" data-page-no="31"><div class="pc pc31 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg31.png"/><div class="t m0 xf h8 y10c ff3 fs4 fc0 sc0 ls0 ws0">3.3.<span class="_ _1f"> </span>PROGRAM<span class="_ _6"> </span>SECTIONS</div><div class="t m0 x114 h9 y7e1 ff22 fs11 fc0 sc0 ls0 ws0">1<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.data</span></div><div class="t m0 x114 h9 y7e2 ff22 fs11 fc0 sc0 ls0 ws0">2<span class="_ _2a"> </span><span class="ff5 fs4">x:<span class="_ _4"> </span>.word<span class="_ _18"> </span>10</span></div><div class="t m0 x114 h9 y7e3 ff22 fs11 fc0 sc0 ls0 ws0">3<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.text</span></div><div class="t m0 x114 h9 y7e4 ff22 fs11 fc0 sc0 ls0 ws0">4<span class="_ _2a"> </span><span class="ff5 fs4">update_x:</span></div><div class="t m0 x114 h9 y7e5 ff22 fs11 fc0 sc0 ls0 ws0">5<span class="_ _37"> </span><span class="ff5 fs4">la<span class="_ _18"> </span>t1,<span class="_ _4"> </span>x</span></div><div class="t m0 x114 h9 y7e6 ff22 fs11 fc0 sc0 ls0 ws0">6<span class="_ _37"> </span><span class="ff5 fs4">sw<span class="_ _18"> </span>a0,<span class="_ _4"> </span>(t1)</span></div><div class="t m0 x114 h9 y7e7 ff22 fs11 fc0 sc0 ls0 ws0">7<span class="_ _37"> </span><span class="ff5 fs4">ret</span></div><div class="t m0 x114 h9 y7e8 ff22 fs11 fc0 sc0 ls0 ws0">8<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.data</span></div><div class="t m0 x114 h9 y7e9 ff22 fs11 fc0 sc0 ls0 ws0">9<span class="_ _2a"> </span><span class="ff5 fs4">y:<span class="_ _4"> </span>.word<span class="_ _18"> </span>12</span></div><div class="t m0 x126 h9 y7ea ff22 fs11 fc0 sc0 ls0 ws0">10<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.text</span></div><div class="t m0 x126 h9 y7eb ff22 fs11 fc0 sc0 ls0 ws0">11<span class="_ _2a"> </span><span class="ff5 fs4">update_y:</span></div><div class="t m0 x126 h9 y7ec ff22 fs11 fc0 sc0 ls0 ws0">12<span class="_ _37"> </span><span class="ff5 fs4">la<span class="_ _18"> </span>t1,<span class="_ _4"> </span>y</span></div><div class="t m0 x126 h9 y7ed ff22 fs11 fc0 sc0 ls0 ws0">13<span class="_ _37"> </span><span class="ff5 fs4">sw<span class="_ _18"> </span>a0,<span class="_ _4"> </span>(t1)</span></div><div class="t m0 x126 h9 y7ee ff22 fs11 fc0 sc0 ls0 ws0">14<span class="_ _37"> </span><span class="ff5 fs4">ret</span></div><div class="t m0 xc h8 y7ef ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _3"> </span><span class="ff5">.section<span class="_ _18"> </span>.data<span class="_ _3"> </span></span>directive<span class="_ _2"> </span>in<span class="_ _3"> </span>the<span class="_ _3"> </span>ﬁrst<span class="_ _3"> </span>line<span class="_ _3"> </span>of<span class="_ _3"> </span>the<span class="_ _3"> </span>previous<span class="_ _3"> </span>example<span class="_ _3"> </span>is<span class="_ _3"> </span>instructing<span class="_ _3"> </span>the<span class="_ _3"> </span>assembler</div><div class="t m0 xf h8 y7f0 ff3 fs4 fc0 sc0 ls0 ws0">to<span class="_ _3"> </span>add<span class="_ _2"> </span>information<span class="_ _3"> </span>to<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">.data<span class="_ _3"> </span></span>section<span class="_ _3"> </span>from<span class="_ _3"> </span>this<span class="_ _3"> </span>p<span class="_ _5"></span>oin<span class="_ _1"></span>t<span class="_ _3"> </span>on.<span class="_ _18"> </span>The<span class="_ _3"> </span>second<span class="_ _3"> </span>line<span class="_ _3"> </span>contains<span class="_ _2"> </span>a<span class="_ _3"> </span>lab<span class="_ _5"></span>el<span class="_ _3"> </span>(<span class="ff5">x:</span>)<span class="_ _24"> </span>and</div><div class="t m0 xf h8 y7f1 ff3 fs4 fc0 sc0 ls0 ws0">a<span class="_ _7"> </span><span class="ff5">.word<span class="_ _7"> </span></span>directive,<span class="_ _7"> </span>which<span class="_ _34"> </span>are<span class="_ _7"> </span>used<span class="_ _7"> </span>together<span class="_ _7"> </span>to<span class="_ _7"> </span>declare<span class="_ _7"> </span>and<span class="_ _24"> </span>initialize<span class="_ _34"> </span>a<span class="_ _24"> </span>global<span class="_ _34"> </span>v<span class="_ _27"></span>ariable<span class="_ _24"> </span>named<span class="_ _34"> </span><span class="ff5">x</span>.<span class="_ _2c"> </span>The</div><div class="t m0 xf h8 y7f2 ff5 fs4 fc0 sc0 ls0 ws0">.section<span class="_ _18"> </span>.text<span class="_ _b"> </span><span class="ff3">directiv<span class="_ _1"></span>e<span class="_ _3"> </span>in<span class="_ _3"> </span>the<span class="_ _3"> </span>third<span class="_ _3"> </span>line<span class="_ _3"> </span>instructs<span class="_ _b"> </span>the<span class="_ _3"> </span>assem<span class="_ _1"></span>bler<span class="_ _3"> </span>to<span class="_ _3"> </span>add<span class="_ _3"> </span>the<span class="_ _3"> </span>following<span class="_ _2"> </span>information<span class="_ _b"> </span>to</span></div><div class="t m0 xf h8 y7f3 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _7"> </span><span class="ff5">.text<span class="_ _7"> </span></span>section.<span class="_ _21"> </span>As<span class="_ _7"> </span>a<span class="_ _24"> </span>consequence,<span class="_ _24"> </span>the<span class="_ _7"> </span><span class="ff5">update<span class="_ _b"> </span>x<span class="_ _7"> </span></span>lab<span class="_ _5"></span>el<span class="_ _7"> </span>(line<span class="_ _24"> </span>4)<span class="_ _7"> </span>refers<span class="_ _7"> </span>to<span class="_ _24"> </span>a<span class="_ _7"> </span>p<span class="_ _5"></span>osition<span class="_ _7"> </span>on<span class="_ _7"> </span>the<span class="_ _24"> </span><span class="ff5">.text</span></div><div class="t m0 xf h8 y7f4 ff3 fs4 fc0 sc0 ls0 ws0">section<span class="_ _6"> </span>and<span class="_ _6"> </span>the<span class="_ _6"> </span>next<span class="_ _6"> </span>three<span class="_ _6"> </span>instructions<span class="_ _6"> </span>(lines<span class="_ _6"> </span>5-7)<span class="_ _6"> </span>are<span class="_ _6"> </span>added<span class="_ _6"> </span>at<span class="_ _6"> </span>the<span class="_ _6"> </span><span class="ff5">.text<span class="_ _6"> </span></span>section.<span class="_ _7"> </span>The<span class="_ _6"> </span><span class="ff5">.section<span class="_ _4"> </span>.data</span></div><div class="t m0 xf h8 y7f5 ff3 fs4 fc0 sc0 ls0 ws0">directiv<span class="_ _1"></span>e<span class="_ _38"> </span>in<span class="_ _6"> </span>line<span class="_ _6"> </span>eight<span class="_"> </span>instructs<span class="_ _6"> </span>the<span class="_ _6"> </span>assembler<span class="_"> </span>to<span class="_ _38"> </span>switch<span class="_"> </span>back<span class="_"> </span>to<span class="_ _6"> </span>the<span class="_ _6"> </span><span class="ff5">.data<span class="_ _6"> </span></span>section.<span class="_ _34"> </span>Hence,<span class="_ _6"> </span>the<span class="_ _6"> </span><span class="ff5">y<span class="_ _6"> </span></span>v<span class="_ _27"></span>ariable,</div><div class="t m0 xf h8 y7f6 ff3 fs4 fc0 sc0 ls0 ws0">created<span class="_ _3"> </span>by<span class="_ _2"> </span>combining<span class="_ _3"> </span>the<span class="_ _3"> </span><span class="ff5">y:<span class="_ _4"> </span></span>lab<span class="_ _5"></span>el<span class="_ _3"> </span>with<span class="_ _b"> </span>the<span class="_ _3"> </span><span class="ff5">.word<span class="_ _b"> </span></span>directiv<span class="_ _1"></span>e,<span class="_ _3"> </span>is<span class="_ _b"> </span>added<span class="_ _3"> </span>to<span class="_ _3"> </span>the<span class="_ _b"> </span><span class="ff5">.data<span class="_ _3"> </span></span>section,<span class="_ _b"> </span>right<span class="_ _2"> </span>after</div><div class="t m0 xf h8 y7f7 ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _2"> </span><span class="ff5">x<span class="_ _3"> </span></span>v<span class="_ _27"></span>ariable.<span class="_ _4"> </span>After<span class="_ _2"> </span>this,<span class="_ _3"> </span><span class="ff5">.section<span class="_ _4"> </span>.text<span class="_ _3"> </span></span>directiv<span class="_ _1"></span>e<span class="_ _2"> </span>in<span class="_ _3"> </span>line<span class="_ _3"> </span>10<span class="_ _3"> </span>instructs<span class="_ _3"> </span>the<span class="_ _2"> </span>assembler<span class="_ _2"> </span>to<span class="_ _3"> </span>add<span class="_ _3"> </span>the<span class="_ _2"> </span>next</div><div class="t m0 xf h8 y7f8 ff3 fs4 fc0 sc0 ls0 ws0">information<span class="_ _2"> </span>to<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">.text<span class="_ _2"> </span></span>section.<span class="_ _7"> </span>Finally<span class="_ _9"></span>,<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">update<span class="_ _b"> </span>y<span class="_ _2"> </span></span>lab<span class="_ _5"></span>el<span class="_ _2"> </span>(line<span class="_ _2"> </span>11)<span class="_ _2"> </span>refers<span class="_ _2"> </span>to<span class="_ _2"> </span>a<span class="_ _2"> </span>p<span class="_ _5"></span>osition<span class="_ _2"> </span>in<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">.text</span></div><div class="t m0 xf h8 y7f9 ff3 fs4 fc0 sc0 ls0 ws0">section<span class="_ _2"> </span>and<span class="_ _2"> </span>the<span class="_ _6"> </span>remaining<span class="_ _2"> </span>instructions<span class="_ _2"> </span>(lines<span class="_ _2"> </span>12-14)<span class="_ _2"> </span>are<span class="_ _2"> </span>added<span class="_ _2"> </span>to<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">.text<span class="_ _2"> </span></span>section.</div><div class="t m0 xc h8 y7fa ff3 fs4 fc0 sc0 ls0 ws0">Assuming<span class="_ _b"> </span>the<span class="_ _34"> </span>previous<span class="_ _b"> </span>co<span class="_ _5"></span>de<span class="_ _34"> </span>is<span class="_ _34"> </span>stored<span class="_ _b"> </span>on<span class="_ _34"> </span>a<span class="_ _34"> </span>ﬁle<span class="_ _b"> </span>named<span class="_ _34"> </span><span class="ff5">prog.s</span>,<span class="_ _34"> </span>we<span class="_ _b"> </span>may<span class="_ _b"> </span>assem<span class="_ _27"></span>ble<span class="_ _34"> </span>the<span class="_ _34"> </span>program<span class="_ _b"> </span>and</div><div class="t m0 xf h8 y7fb ff3 fs4 fc0 sc0 ls0 ws0">insp<span class="_ _5"></span>ect<span class="_ _6"> </span>the<span class="_ _2"> </span>conten<span class="_ _27"></span>ts<span class="_ _2"> </span>of<span class="_ _2"> </span>the<span class="_ _2"> </span>ob<span class="_ _22"></span>ject<span class="_ _2"> </span>ﬁle<span class="_ _2"> </span>using<span class="_ _2"> </span>the<span class="_ _2"> </span>following<span class="_ _6"> </span>commands</div><div class="t m0 x66 h11 y7fc ffc fs7 fc0 sc0 ls0 ws0">11</div><div class="t m0 x81 h8 y7fb ff3 fs4 fc0 sc0 ls0 ws0">:</div><div class="t m0 xf h9 y7fd ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-as<span class="_ _4"> </span>-march=rv32im<span class="_ _4"> </span>prog.s<span class="_ _4"> </span>-o<span class="_ _4"> </span>prog.o</div><div class="t m0 xf h9 y7fe ff5 fs4 fc0 sc0 ls0 ws0">$<span class="_ _18"> </span>riscv64-unknown-elf-objdump<span class="_ _4"> </span>-D<span class="_ _4"> </span>prog.o</div><div class="t m0 xf h9 y7ff ff5 fs4 fc0 sc0 ls0 ws0">prog.o:<span class="_ _8a"> </span>file<span class="_ _18"> </span>format<span class="_ _4"> </span>elf32-littleriscv</div><div class="t m0 xf h9 y800 ff5 fs4 fc0 sc0 ls0 ws0">Disassembly<span class="_ _18"> </span>of<span class="_ _4"> </span>section<span class="_ _4"> </span>.text:</div><div class="t m0 x3f h1d y801 fff fsd fc0 sc0 ls0 ws0">11</div><div class="t m0 xc h1e y802 ff10 fse fc0 sc0 ls0 ws0">In<span class="_"> </span>this<span class="_ _35"> </span>example,<span class="_"> </span>the<span class="_"> </span><span class="ff28">la<span class="_ _35"> </span></span>assem<span class="_ _27"></span>bly<span class="_"> </span>instruction<span class="_"> </span>is<span class="_ _35"> </span>a<span class="_"> </span>pseudo-instruction<span class="_ _35"> </span>that<span class="_"> </span>is<span class="_ _35"> </span>conv<span class="_ _27"></span>erted<span class="_"> </span>b<span class="_ _27"></span>y<span class="_"> </span>the<span class="_"> </span>assem<span class="_ _27"></span>bler<span class="_"> </span>into<span class="_ _35"> </span>t<span class="_ _1"></span>wo<span class="_ _35"> </span>mac<span class="_ _1"></span>hine</div><div class="t m0 xf h1e y803 ff10 fse fc0 sc0 ls0 ws0">instructions:<span class="_ _3"> </span><span class="ff28">auipc<span class="_ _89"> </span></span>and<span class="_ _38"> </span><span class="ff28">mv</span>.<span class="_ _3"> </span>These<span class="_ _38"> </span>tw<span class="_ _27"></span>o<span class="_ _38"> </span>instructions<span class="_ _89"> </span>will<span class="_ _38"> </span>b<span class="_ _5"></span>e<span class="_ _89"> </span>later<span class="_ _38"> </span>up<span class="_ _5"></span>dated<span class="_ _89"> </span>by<span class="_"> </span>the<span class="_ _38"> </span>linker<span class="_"> </span>so<span class="_ _38"> </span>that<span class="_ _89"> </span>they<span class="_ _38"> </span>load<span class="_ _89"> </span>the<span class="_ _38"> </span>address<span class="_ _89"> </span>of<span class="_ _38"> </span>the</div><div class="t m0 xf h1e y804 ff10 fse fc0 sc0 ls0 ws0">respective<span class="_ _38"> </span>lab<span class="_ _5"></span>el<span class="_ _89"> </span>into<span class="_ _38"> </span>the<span class="_ _38"> </span>target<span class="_ _38"> </span>register,<span class="_ _38"> </span><span class="ff11">i.e.</span>,<span class="_ _38"> </span>register<span class="_ _38"> </span><span class="ff28">t1</span>.</div><div class="t m0 x2c h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">Prin<span class="_ _1"></span>ted<span class="_ _2"> </span>v<span class="_ _1"></span>ersion<span class="_ _2"> </span>a<span class="_ _1"></span>v<span class="_ _27"></span>ailable<span class="_ _2"> </span>for<span class="_ _6"> </span>purchase<span class="_ _6"> </span>at<span class="_ _2"> </span>Amazon.com</div><div class="t m0 x2d h8 y142 ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _9"></span>ree<span class="_ _2"> </span>online<span class="_ _6"> </span>version<span class="_ _6"> </span>at<span class="_ _2"> </span><span class="ff5">http://riscv-<span class="_ _22"></span>programming.org</span></div><div class="t m0 x11e h8 y143 ff3 fs4 fc0 sc0 ls0 ws0">(Generated<span class="_ _2"> </span>on<span class="_ _2"> </span>Ma<span class="_ _1"></span>y<span class="_ _6"> </span>31,<span class="_ _2"> </span>20<span class="_ _5"></span>24)</div><div class="t m0 xb7 h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">36</div><a class="l" href="#pf31" data-dest-detail='[49,"XYZ",87.243,301.775,null]'><div class="d m1" style="border-style:none;position:absolute;left:367.614000px;bottom:386.702000px;width:10.433000px;height:12.039000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://a.co/d/gUfKWsD"><div class="d m1" style="border-style:none;position:absolute;left:358.258000px;bottom:69.067000px;width:58.171000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:271.722000px;bottom:56.835000px;width:148.940000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
