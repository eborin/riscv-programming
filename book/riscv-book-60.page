<div id="pf3c" class="pf w0 h0" data-page-no="3c"><div class="pc pc3c w0 h0"><img class="bi xf y9a8 w2 h90" alt="" src="bg3c.png"/><div class="t m0 xf h8 y10d ff3 fs4 fc0 sc0 ls0 ws0">4.7.<span class="_ _1f"> </span>ASSEMBL<span class="_ _9"></span>Y<span class="_ _2"> </span>DIRECTIVES</div><div class="c x29 y9a9 w17 h91"><div class="t m0 x75 h92 y9aa ff45 fs36 fc0 sc0 ls0 ws0">Contents<span class="_ _20"> </span>Address</div><div class="t m0 x11a h93 y9ab ff46 fs36 fc0 sc0 ls0 ws0">000</div><div class="t m0 x11a h93 y9ac ff46 fs36 fc0 sc0 ls0 ws0">001</div><div class="t m0 x11a h93 y9ad ff46 fs36 fc0 sc0 ls0 ws0">002</div><div class="t m0 x11a h93 y9ae ff46 fs36 fc0 sc0 ls0 ws0">003</div><div class="t m0 x11a h93 y9af ff46 fs36 fc0 sc0 ls0 ws0">004</div><div class="t m0 x11a h93 y9b0 ff46 fs36 fc0 sc0 ls0 ws0">005</div><div class="t m0 x11a h93 y9b1 ff46 fs36 fc0 sc0 ls0 ws0">006</div><div class="t m0 x11a h93 y9b2 ff46 fs36 fc0 sc0 ls0 ws0">007</div><div class="t m0 x11a h93 y9b3 ff46 fs36 fc0 sc0 ls0 ws0">...</div><div class="t m0 x75 h92 y9b4 ff45 fs36 fc0 sc0 ls0 ws0">Location </div><div class="t m0 x11d h92 y9b5 ff45 fs36 fc0 sc0 ls0 ws0">counter:</div><div class="t m0 x11a h93 y9b6 ff46 fs36 fc0 sc0 ls0 ws0">000</div><div class="t m0 x44 h92 y9b7 ff47 fs36 fc0 sc0 ls0 ws0">.text<span class="ff45"> section</span></div><div class="t m0 xd7 h92 y9b8 ff45 fs36 fc0 sc0 ls0 ws0">Symbol table</div><div class="t m0 x135 h94 y9b9 ff46 fs37 fc0 sc0 ls0 ws0">sum42<span class="ff48">:</span></div><div class="t m0 x135 h94 y9ba ff46 fs37 fc0 sc0 ls0 ws0">  addi a0, a0, 42 </div><div class="t m0 x135 h94 y9bb ff46 fs37 fc0 sc0 ls0 ws0">  ret</div><div class="t m0 x133 h92 y9bc ff45 fs36 fc0 sc0 ls0 ws0">Input file</div><div class="t m0 x10d h92 y9b4 ff45 fs36 fc0 sc0 ls0 ws0">Location </div><div class="t m0 xbd h92 y9b5 ff45 fs36 fc0 sc0 ls0 ws0">counter:</div><div class="t m0 x81 h93 y9b6 ff46 fs36 fc0 sc0 ls0 ws0">000</div><div class="t m0 x11f h92 y9b7 ff47 fs36 fc0 sc0 ls0 ws0">.data<span class="ff45"> section</span></div><div class="t m0 x85 h95 y9bd ff46 fs38 fc0 sc0 ls0 ws0">...</div><div class="t m0 x1e h92 y9be ff45 fs36 fc0 sc0 ls0 ws0">Active section</div><div class="t m0 x10d h92 y9aa ff45 fs36 fc0 sc0 ls0 ws0">Contents<span class="_ _20"> </span>Address</div><div class="t m0 x81 h93 y9ab ff46 fs36 fc0 sc0 ls0 ws0">000</div><div class="t m0 x81 h93 y9ac ff46 fs36 fc0 sc0 ls0 ws0">001</div><div class="t m0 x81 h93 y9ad ff46 fs36 fc0 sc0 ls0 ws0">002</div><div class="t m0 x81 h93 y9ae ff46 fs36 fc0 sc0 ls0 ws0">003</div><div class="t m0 x81 h93 y9af ff46 fs36 fc0 sc0 ls0 ws0">004</div><div class="t m0 x81 h93 y9b0 ff46 fs36 fc0 sc0 ls0 ws0">005</div><div class="t m0 x81 h93 y9b1 ff46 fs36 fc0 sc0 ls0 ws0">006</div><div class="t m0 x81 h93 y9b2 ff46 fs36 fc0 sc0 ls0 ws0">007</div><div class="t m0 x81 h93 y9b3 ff46 fs36 fc0 sc0 ls0 ws0">...</div></div><div class="t m0 xf h8 y9bf ff3 fs4 fc0 sc0 ls0 ws0">Figure<span class="_ _3"> </span>4.1:<span class="_ _4"> </span>Assembler<span class="_ _2"> </span>internal<span class="_ _3"> </span>structures<span class="_ _3"> </span>up<span class="_ _5"></span>on<span class="_ _b"> </span>start.<span class="_ _2a"> </span>The<span class="_ _3"> </span>sections’<span class="_ _b"> </span>con<span class="_ _1"></span>ten<span class="_ _1"></span>ts<span class="_ _3"> </span>and<span class="_ _b"> </span>the<span class="_ _3"> </span>symbol<span class="_ _3"> </span>table<span class="_ _b"> </span>are</div><div class="t m0 xf h8 y9c0 ff3 fs4 fc0 sc0 ls0 ws0">cleared,<span class="_ _6"> </span>the<span class="_ _38"> </span>lo<span class="_ _5"></span>cation<span class="_ _6"> </span>counters are<span class="_ _6"> </span>initialized<span class="_ _6"> </span>with<span class="_ _6"> </span>zero,<span class="_ _6"> </span>and<span class="_ _6"> </span>the<span class="_ _6"> </span><span class="ff5">.text<span class="_ _38"> </span></span>section<span class="_ _6"> </span>is<span class="_ _6"> </span>set<span class="_ _6"> </span>as<span class="_ _6"> </span>the<span class="_ _6"> </span>active section.</div><div class="c x29 y9c1 w17 h91"><div class="t m0 x75 h92 y9aa ff49 fs36 fc0 sc0 ls0 ws0">Contents<span class="_ _20"> </span>Address</div><div class="t m0 x11a h93 y9ab ff4a fs36 fc0 sc0 ls0 ws0">000</div><div class="t m0 x11a h93 y9ac ff4a fs36 fc0 sc0 ls0 ws0">001</div><div class="t m0 x11a h93 y9ad ff4a fs36 fc0 sc0 ls0 ws0">002</div><div class="t m0 x11a h93 y9ae ff4a fs36 fc0 sc0 ls0 ws0">003</div><div class="t m0 x11a h93 y9af ff4a fs36 fc0 sc0 ls0 ws0">004</div><div class="t m0 x11a h93 y9b0 ff4a fs36 fc0 sc0 ls0 ws0">005</div><div class="t m0 x11a h93 y9b1 ff4a fs36 fc0 sc0 ls0 ws0">006</div><div class="t m0 x11a h93 y9b2 ff4a fs36 fc0 sc0 ls0 ws0">007</div><div class="t m0 x11a h93 y9b3 ff4a fs36 fc0 sc0 ls0 ws0">...</div><div class="t m0 x75 h92 y9b4 ff49 fs36 fc0 sc0 ls0 ws0">Location </div><div class="t m0 x11d h92 y9b5 ff49 fs36 fc0 sc0 ls0 ws0">counter:</div><div class="t m0 x11a h93 y9b6 ff4a fs36 fc0 sc0 ls0 ws0">000</div><div class="t m0 x44 h92 y9b7 ff4b fs36 fc0 sc0 ls0 ws0">.text<span class="ff49"> section</span></div><div class="t m0 xd7 h92 y9b8 ff49 fs36 fc0 sc0 ls0 ws0">Symbol table</div><div class="t m0 x13b h96 y9c2 ff4c fs36 fc0 sc0 ls0 ws0">sum42<span class="_ _14"> </span>000</div><div class="t m0 x135 h94 y9b9 ff4d fs37 fc0 sc0 ls0 ws0">sum42:</div><div class="t m0 x135 h94 y9ba ff4a fs37 fc0 sc0 ls0 ws0">  addi a0, a0, 42 </div><div class="t m0 x135 h94 y9bb ff4a fs37 fc0 sc0 ls0 ws0">  ret</div><div class="t m0 x133 h92 y9bc ff49 fs36 fc0 sc0 ls0 ws0">Input file</div><div class="t m0 x112 h97 y9c3 ff49 fs37 fc1 sc0 ls0 ws0">1</div><div class="t m0 x13 h97 y9c4 ff49 fs37 fc1 sc0 ls0 ws0">2</div><div class="t m0 x10d h92 y9b4 ff49 fs36 fc0 sc0 ls0 ws0">Location </div><div class="t m0 xbd h92 y9b5 ff49 fs36 fc0 sc0 ls0 ws0">counter:</div><div class="t m0 x81 h93 y9b6 ff4a fs36 fc0 sc0 ls0 ws0">000</div><div class="t m0 x11f h92 y9b7 ff4b fs36 fc0 sc0 ls0 ws0">.data<span class="ff49"> section</span></div><div class="t m0 x85 h95 y9bd ff4a fs38 fc0 sc0 ls0 ws0">...</div><div class="t m0 x1e h92 y9be ff49 fs36 fc0 sc0 ls0 ws0">Active section</div><div class="t m0 x10d h92 y9aa ff49 fs36 fc0 sc0 ls0 ws0">Contents<span class="_ _20"> </span>Address</div><div class="t m0 x81 h93 y9ab ff4a fs36 fc0 sc0 ls0 ws0">000</div><div class="t m0 x81 h93 y9ac ff4a fs36 fc0 sc0 ls0 ws0">001</div><div class="t m0 x81 h93 y9ad ff4a fs36 fc0 sc0 ls0 ws0">002</div><div class="t m0 x81 h93 y9ae ff4a fs36 fc0 sc0 ls0 ws0">003</div><div class="t m0 x81 h93 y9af ff4a fs36 fc0 sc0 ls0 ws0">004</div><div class="t m0 x81 h93 y9b0 ff4a fs36 fc0 sc0 ls0 ws0">005</div><div class="t m0 x81 h93 y9b1 ff4a fs36 fc0 sc0 ls0 ws0">006</div><div class="t m0 x81 h93 y9b2 ff4a fs36 fc0 sc0 ls0 ws0">007</div><div class="t m0 x81 h93 y9b3 ff4a fs36 fc0 sc0 ls0 ws0">...</div></div><div class="t m0 x1a h8 y9c5 ff3 fs4 fc0 sc0 ls0 ws0">Figure<span class="_ _2"> </span>4.2:<span class="_ _7"> </span>Example<span class="_ _2"> </span>of<span class="_ _6"> </span>a<span class="_ _3"> </span>label<span class="_ _2"> </span>b<span class="_ _5"></span>eing<span class="_ _2"> </span>pro<span class="_ _5"></span>cessed<span class="_ _2"> </span>by<span class="_ _6"> </span>the<span class="_ _2"> </span>assembler.</div><div class="t m0 xf h8 y9c6 ff3 fs4 fc0 sc0 ls0 ws0">activ<span class="_ _1"></span>e<span class="_ _b"> </span>lo<span class="_ _5"></span>cation<span class="_ _34"> </span>counter,<span class="_ _34"> </span>and<span class="_ _1b"> </span><span class="ff7 fc1">3<span class="_ _39"> </span></span>up<span class="_ _5"></span>dates<span class="_ _34"> </span>the<span class="_ _34"> </span>active<span class="_ _b"> </span>lo<span class="_ _5"></span>cation<span class="_ _34"> </span>counter<span class="_ _b"> </span>so<span class="_ _34"> </span>it<span class="_ _34"> </span>p<span class="_ _5"></span>oin<span class="_ _1"></span>ts<span class="_ _b"> </span>to<span class="_ _34"> </span>the<span class="_ _34"> </span>next<span class="_ _34"> </span>av<span class="_ _9"></span>ailable</div><div class="t m0 xf h8 y9c7 ff3 fs4 fc0 sc0 ls0 ws0">address.<span class="_ _7"> </span>This<span class="_ _2"> </span>pro<span class="_ _5"></span>cess<span class="_ _6"> </span>is<span class="_ _2"> </span>illustrated<span class="_ _2"> </span>in<span class="_ _2"> </span>Figure<span class="_ _2"> </span>4.4.</div><div class="t m0 xc h8 y9c8 ff3 fs4 fc0 sc0 ls0 ws0">Once<span class="_ _b"> </span>all<span class="_ _34"> </span>elements<span class="_ _b"> </span>from<span class="_ _b"> </span>the<span class="_ _34"> </span>input<span class="_ _b"> </span>ﬁle<span class="_ _34"> </span>are<span class="_ _b"> </span>pro<span class="_ _5"></span>cessed,<span class="_ _7"> </span>the<span class="_ _b"> </span>assembler<span class="_ _b"> </span>stores<span class="_ _34"> </span>the<span class="_ _b"> </span>section<span class="_ _34"> </span>conten<span class="_ _27"></span>ts,<span class="_ _34"> </span>the</div><div class="t m0 xf h8 y9c9 ff3 fs4 fc0 sc0 ls0 ws0">sym<span class="_ _1"></span>b<span class="_ _5"></span>ol<span class="_ _6"> </span>table,<span class="_ _2"> </span>and<span class="_ _2"> </span>other<span class="_ _2"> </span>relev<span class="_ _27"></span>ant<span class="_ _6"> </span>information<span class="_ _2"> </span>(such<span class="_ _6"> </span>as<span class="_ _2"> </span>the<span class="_ _2"> </span>relo<span class="_ _5"></span>cation<span class="_ _2"> </span>records)<span class="_ _2"> </span>on<span class="_ _2"> </span>the<span class="_ _2"> </span>ob<span class="_ _22"></span>ject<span class="_ _2"> </span>ﬁle.</div><div class="t m0 xf he y9ca ff6 fs3 fc0 sc0 ls0 ws0">4.7<span class="_ _37"> </span>Assem<span class="_ _27"></span>bly<span class="_ _4"> </span>directiv<span class="_ _1"></span>es</div><div class="t m0 xf h8 y9cb ff3 fs4 fc0 sc0 ls0 ws0">Assem<span class="_ _1"></span>bly<span class="_ _b"> </span>directives<span class="_ _b"> </span>are<span class="_ _34"> </span>commands<span class="_ _34"> </span>used<span class="_ _34"> </span>to<span class="_ _b"> </span>control<span class="_ _b"> </span>the<span class="_ _34"> </span>assembler.<span class="_ _d"> </span>F<span class="_ _9"></span>or<span class="_ _34"> </span>example,<span class="_ _7"> </span>the<span class="_ _34"> </span><span class="ff5">.section<span class="_ _4"> </span>.data</span></div><div class="t m0 xf h8 y9cc ff3 fs4 fc0 sc0 ls0 ws0">directiv<span class="_ _1"></span>e<span class="_ _b"> </span>instructs<span class="_ _34"> </span>the<span class="_ _34"> </span>assembler<span class="_ _b"> </span>to<span class="_ _34"> </span>turn<span class="_ _34"> </span>the<span class="_ _34"> </span><span class="ff5">.data<span class="_ _34"> </span></span>section<span class="_ _b"> </span>into<span class="_ _b"> </span>the<span class="_ _34"> </span>active<span class="_ _b"> </span>section,<span class="_ _7"> </span>and<span class="_ _34"> </span>the<span class="_ _b"> </span><span class="ff5">.word<span class="_ _4"> </span>10</span></div><div class="t m0 xf h8 y9cd ff3 fs4 fc0 sc0 ls0 ws0">directiv<span class="_ _1"></span>e<span class="_ _2"> </span>instructs<span class="_ _2"> </span>the<span class="_ _6"> </span>assembler<span class="_ _6"> </span>to<span class="_ _2"> </span>assemble<span class="_ _6"> </span>a<span class="_ _2"> </span>32-bit<span class="_ _2"> </span>v<span class="_ _27"></span>alue<span class="_ _2"> </span>(10)<span class="_ _2"> </span>and<span class="_ _2"> </span>add<span class="_ _2"> </span>it<span class="_ _2"> </span>to<span class="_ _2"> </span>the<span class="_ _2"> </span>active<span class="_ _6"> </span>section.</div><div class="t m0 xc h8 y9ce ff3 fs4 fc0 sc0 ls0 ws0">Assem<span class="_ _1"></span>bly<span class="_ _b"> </span>directiv<span class="_ _27"></span>e<span class="_ _5"></span>s<span class="_ _3"> </span>are<span class="_ _b"> </span>usually<span class="_ _b"> </span>enco<span class="_ _5"></span>ded<span class="_ _b"> </span>as<span class="_ _b"> </span>a<span class="_ _b"> </span>string<span class="_ _b"> </span>that<span class="_ _b"> </span>con<span class="_ _1"></span>tains<span class="_ _b"> </span>the<span class="_ _3"> </span>directive<span class="_ _3"> </span>name<span class="_ _b"> </span>and<span class="_ _b"> </span>its<span class="_ _b"> </span>argu-</div><div class="t m0 xf h8 y9cf ff3 fs4 fc0 sc0 ls0 ws0">men<span class="_ _1"></span>ts.<span class="_ _18"> </span>On<span class="_ _2"> </span>GNU<span class="_ _3"> </span>assemblers,<span class="_ _2"> </span>directive<span class="_ _2"> </span>names<span class="_ _2"> </span>contain<span class="_ _2"> </span>a<span class="_ _3"> </span>dot<span class="_ _2"> </span>(‘.’)<span class="_ _18"> </span>preﬁx.<span class="_ _4"> </span>The<span class="_ _2"> </span>next<span class="_ _3"> </span>sections<span class="_ _2"> </span>discuss<span class="_ _3"> </span>some</div><div class="t m0 xf h8 y9d0 ff3 fs4 fc0 sc0 ls0 ws0">of<span class="_ _2"> </span>the<span class="_ _2"> </span>most<span class="_ _6"> </span>common<span class="_ _2"> </span>directives<span class="_ _6"> </span>used<span class="_ _2"> </span>to<span class="_ _2"> </span>implement<span class="_ _6"> </span>assembly<span class="_ _6"> </span>programs.</div><div class="t m0 x2c h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">Prin<span class="_ _1"></span>ted<span class="_ _2"> </span>v<span class="_ _1"></span>ersion<span class="_ _2"> </span>a<span class="_ _1"></span>v<span class="_ _27"></span>ailable<span class="_ _2"> </span>for<span class="_ _6"> </span>purchase<span class="_ _6"> </span>at<span class="_ _2"> </span>Amazon.com</div><div class="t m0 x2d h8 y143 ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _9"></span>ree<span class="_ _2"> </span>online<span class="_ _6"> </span>version<span class="_ _6"> </span>at<span class="_ _2"> </span><span class="ff5">http://riscv-<span class="_ _22"></span>programming.org</span></div><div class="t m0 x2e h8 y144 ff3 fs4 fc0 sc0 ls0 ws0">(Generated<span class="_ _2"> </span>on<span class="_ _2"> </span>F<span class="_ _9"></span>ebruary<span class="_ _2"> </span>10,<span class="_ _6"> </span>2025)</div><div class="t m0 xb8 h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">47</div><a class="l" href="#pf3d" data-dest-detail='[61,"XYZ",72,535.054,null]'><div class="d m1" style="border-style:none;position:absolute;left:268.679000px;bottom:280.348000px;width:14.723000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfa" data-dest-detail='[10,"XYZ",72,552.649,null]'><div class="d m1" style="border-style:none;position:absolute;left:290.044000px;bottom:177.207000px;width:14.169000px;height:11.955000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://a.co/d/gUfKWsD"><div class="d m1" style="border-style:none;position:absolute;left:358.258000px;bottom:69.067000px;width:58.171000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:271.722000px;bottom:56.835000px;width:148.940000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
