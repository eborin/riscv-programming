<div id="pf3e" class="pf w0 h0" data-page-no="3e"><div class="pc pc3e w0 h0"><img class="bi xf y56c w16 h4f" alt="" src="bg3e.png"/><div class="t m0 xf h8 y10d ff3 fs4 fc0 sc0 ls0 ws0">4.7.<span class="_ _1f"> </span>ASSEMBL<span class="_ _9"></span>Y<span class="_ _2"> </span>DIRECTIVES</div><div class="t m0 x13a h8 y260 ff3 fs4 fc0 sc0 ls0 ws0">Directiv<span class="_ _1"></span>e<span class="_ _5c"> </span>Arguments<span class="_ _9b"> </span>Description</div><div class="t m0 x1f h8 y9f7 ff5 fs4 fc0 sc0 ls0 ws0">.byte<span class="_ _5c"> </span><span class="ff3">expression<span class="_ _2"> </span>[,<span class="_ _2"> </span>expression]*<span class="_ _36"> </span>Emit<span class="_ _b"> </span>one<span class="_ _b"> </span>or<span class="_ _b"> </span>more<span class="_ _34"> </span>8-bit<span class="_ _b"> </span>comma<span class="_ _b"> </span>separated</span></div><div class="t m0 x14 h8 y262 ff3 fs4 fc0 sc0 ls0 ws0">w<span class="_ _1"></span>ords</div><div class="t m0 x1f h8 y264 ff5 fs4 fc0 sc0 ls0 ws0">.half<span class="_ _5c"> </span><span class="ff3">expression<span class="_ _2"> </span>[,<span class="_ _2"> </span>expression]*<span class="_ _36"> </span>Emit<span class="_ _6"> </span>one<span class="_ _6"> </span>or<span class="_ _2"> </span>more<span class="_ _6"> </span>16-bit<span class="_ _2"> </span>comma<span class="_ _6"> </span>separated</span></div><div class="t m0 x14 h8 y9f8 ff3 fs4 fc0 sc0 ls0 ws0">w<span class="_ _1"></span>ords</div><div class="t m0 x1f h8 y9f9 ff5 fs4 fc0 sc0 ls0 ws0">.word<span class="_ _5c"> </span><span class="ff3">expression<span class="_ _2"> </span>[,<span class="_ _2"> </span>expression]*<span class="_ _36"> </span>Emit<span class="_ _6"> </span>one<span class="_ _6"> </span>or<span class="_ _2"> </span>more<span class="_ _6"> </span>32-bit<span class="_ _2"> </span>comma<span class="_ _6"> </span>separated</span></div><div class="t m0 x14 h8 y9fa ff3 fs4 fc0 sc0 ls0 ws0">w<span class="_ _1"></span>ords</div><div class="t m0 x13c h8 y9fb ff5 fs4 fc0 sc0 ls0 ws0">.dword<span class="_ _5c"> </span><span class="ff3">expression<span class="_ _2"> </span>[,<span class="_ _2"> </span>expression]*<span class="_ _36"> </span>Emit<span class="_ _6"> </span>one<span class="_ _6"> </span>or<span class="_ _2"> </span>more<span class="_ _6"> </span>64-bit<span class="_ _2"> </span>comma<span class="_ _6"> </span>separated</span></div><div class="t m0 x14 h8 y9fc ff3 fs4 fc0 sc0 ls0 ws0">w<span class="_ _1"></span>ords</div><div class="t m0 x76 h8 y9fd ff5 fs4 fc0 sc0 ls0 ws0">.string<span class="_ _5c"> </span><span class="ff3">string<span class="_ _9c"> </span>Emit<span class="_ _2"> </span>NULL<span class="_ _2"> </span>terminated<span class="_ _6"> </span>string</span></div><div class="t m0 x13c h8 y9fe ff5 fs4 fc0 sc0 ls0 ws0">.asciz<span class="_ _5c"> </span><span class="ff3">string<span class="_ _9c"> </span>Emit<span class="_ _4"> </span>NULL<span class="_ _2a"> </span>terminated<span class="_ _4"> </span>string<span class="_ _2a"> </span>(alias<span class="_ _4"> </span>for</span></div><div class="t m0 x14 h8 y9ff ff3 fs4 fc0 sc0 ls0 ws0">.string)</div><div class="t m0 x13c h8 ya00 ff5 fs4 fc0 sc0 ls0 ws0">.ascii<span class="_ _5c"> </span><span class="ff3">string<span class="_ _9c"> </span>Emit<span class="_ _2"> </span>string<span class="_ _2"> </span>without<span class="_ _6"> </span>NULL<span class="_ _2"> </span>character</span></div><div class="t m0 xdf h8 y4e7 ff3 fs4 fc0 sc0 ls0 ws0">T<span class="_ _9"></span>able<span class="_ _2"> </span>4.1:<span class="_ _34"> </span>List<span class="_ _3"> </span>of<span class="_ _6"> </span>assembly<span class="_ _6"> </span>directives<span class="_ _6"> </span>that<span class="_ _2"> </span>can<span class="_ _2"> </span>b<span class="_ _5"></span>e<span class="_ _2"> </span>used<span class="_ _2"> </span>to<span class="_ _2"> </span>add<span class="_ _2"> </span>v<span class="_ _27"></span>alues<span class="_ _2"> </span>to<span class="_ _2"> </span>a<span class="_ _2"> </span>program.</div><div class="t m0 x114 h9 ya01 ff22 fs11 fc0 sc0 ls0 ws0">1<span class="_ _2a"> </span><span class="ff5 fs4">x:<span class="_ _4"> </span>.byte<span class="_ _18"> </span>10,<span class="_ _4"> </span>12,<span class="_ _4"> </span>’A’,<span class="_ _4"> </span>5+5</span></div><div class="t m0 x114 h9 ya02 ff22 fs11 fc0 sc0 ls0 ws0">2<span class="_ _2a"> </span><span class="ff5 fs4">y:<span class="_ _4"> </span>.word<span class="_ _18"> </span>x</span></div><div class="t m0 x114 h9 ya03 ff22 fs11 fc0 sc0 ls0 ws0">3<span class="_ _2a"> </span><span class="ff5 fs4">z:<span class="_ _4"> </span>.word<span class="_ _18"> </span>y+4</span></div><div class="t m0 x114 h9 ya04 ff22 fs11 fc0 sc0 ls0 ws0">4<span class="_ _2a"> </span><span class="ff5 fs4">i:<span class="_ _4"> </span>.word<span class="_ _18"> </span>0</span></div><div class="t m0 x114 h9 ya05 ff22 fs11 fc0 sc0 ls0 ws0">5<span class="_ _2a"> </span><span class="ff5 fs4">j:<span class="_ _4"> </span>.word<span class="_ _18"> </span>1</span></div><div class="t m0 xc h8 ya06 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _6"> </span><span class="ff5">.string</span>,<span class="_ _6"> </span><span class="ff5">.asciz</span>,<span class="_ _6"> </span>and<span class="_ _6"> </span><span class="ff5">.ascii<span class="_ _6"> </span></span>directives add<span class="_ _6"> </span>strings<span class="_ _6"> </span>to<span class="_ _6"> </span>the<span class="_ _6"> </span>active section.<span class="_ _7"> </span>The<span class="_ _6"> </span>string<span class="_ _6"> </span>is<span class="_ _6"> </span>enco<span class="_ _5"></span>ded</div><div class="t m0 xf h8 ya07 ff3 fs4 fc0 sc0 ls0 ws0">as<span class="_ _a"> </span>a sequence<span class="_ _a"> </span>of b<span class="_ _27"></span>ytes as<span class="_ _35"> </span>discussed on<span class="_ _a"> </span>Section 2.3.<span class="_ _b"> </span>The<span class="_ _a"> </span><span class="ff5">.string<span class="_ _8b"> </span></span>and <span class="ff5">.asciz<span class="_ _a"> </span></span>directiv<span class="_ _1"></span>es<span class="_ _a"> </span>also adds, after<span class="_ _35"> </span>the</div><div class="t m0 xf h8 ya08 ff3 fs4 fc0 sc0 ls0 ws0">string,<span class="_ _6"> </span>an<span class="_ _38"> </span>extra<span class="_ _6"> </span>byte with<span class="_ _6"> </span>v<span class="_ _27"></span>alue<span class="_ _6"> </span>zero.<span class="_ _7"> </span>They<span class="_ _38"> </span>are<span class="_ _6"> </span>useful<span class="_ _6"> </span>to<span class="_ _6"> </span>add<span class="_ _6"> </span>NULL-terminated<span class="_ _6"> </span>strings<span class="_ _6"> </span>to<span class="_ _38"> </span>the<span class="_ _6"> </span>program</div><div class="t m0 x42 h12 ya09 ffc fs7 fc0 sc0 ls0 ws0">3</div><div class="t m0 x43 h8 ya08 ff3 fs4 fc0 sc0 ls0 ws0">.</div><div class="t m0 xc h8 ya0a ff3 fs4 fc0 sc0 ls0 ws0">T<span class="_ _9"></span>o<span class="_ _b"> </span>illustrate<span class="_ _b"> </span>the<span class="_ _34"> </span>use<span class="_ _b"> </span>of<span class="_ _34"> </span>the<span class="_ _b"> </span>previous<span class="_ _34"> </span>directiv<span class="_ _1"></span>es,<span class="_ _34"> </span>let<span class="_ _b"> </span>us<span class="_ _34"> </span>assem<span class="_ _1"></span>ble<span class="_ _b"> </span>the<span class="_ _b"> </span>following<span class="_ _b"> </span>program,<span class="_ _34"> </span>which<span class="_ _3"> </span>adds</div><div class="t m0 xf h8 ya0b ff3 fs4 fc0 sc0 ls0 ws0">v<span class="_ _27"></span>alues<span class="_ _2"> </span>to<span class="_ _2"> </span>the<span class="_ _6"> </span><span class="ff5">.data<span class="_ _2"> </span></span>section:</div><div class="t m0 x114 h9 ya0c ff22 fs11 fc0 sc0 ls0 ws0">1<span class="_ _2a"> </span><span class="ff5 fs4">.section<span class="_ _4"> </span>.data</span></div><div class="t m0 x114 h9 ya0d ff22 fs11 fc0 sc0 ls0 ws0">2<span class="_ _2a"> </span><span class="ff5 fs4">msg:<span class="_ _4"> </span>.ascii<span class="_ _18"> </span>&quot;hello&quot;</span></div><div class="t m0 x114 h9 ya0e ff22 fs11 fc0 sc0 ls0 ws0">3<span class="_ _2a"> </span><span class="ff5 fs4">x:<span class="_ _3f"> </span>.word<span class="_ _4"> </span>10</span></div><div class="t m0 xc h8 ya0f ff3 fs4 fc0 sc0 ls0 ws0">As discussed<span class="_ _a"> </span>in<span class="_ _a"> </span>Section 4.6, the<span class="_ _a"> </span>GNU assem<span class="_ _27"></span>bler ﬁrst<span class="_ _a"> </span>clears the<span class="_ _a"> </span>conten<span class="_ _27"></span>ts of<span class="_ _a"> </span>the sections<span class="_ _a"> </span>and the<span class="_ _a"> </span>symbol</div><div class="t m0 xf h8 ya10 ff3 fs4 fc0 sc0 ls0 ws0">table, initializes all location coun<span class="_ _1"></span>ters with zero, and<span class="_ _a"> </span>selects the <span class="ff5">.text<span class="_ _8b"> </span></span>section as the activ<span class="_ _27"></span>e section.<span class="_ _b"> </span>Then,</div><div class="t m0 xf h8 ya11 ff3 fs4 fc0 sc0 ls0 ws0">it<span class="_ _b"> </span>starts<span class="_ _3"> </span>pro<span class="_ _5"></span>cessing<span class="_ _b"> </span>the<span class="_ _b"> </span>input<span class="_ _b"> </span>ﬁle.<span class="_ _1c"> </span>The<span class="_ _b"> </span>ﬁrst<span class="_ _b"> </span>assembly<span class="_ _3"> </span>element<span class="_ _3"> </span>in<span class="_ _b"> </span>the<span class="_ _b"> </span>input<span class="_ _b"> </span>ﬁle<span class="_ _b"> </span>is<span class="_ _b"> </span>the<span class="_ _3"> </span><span class="ff5">.section<span class="_ _4"> </span>.data</span></div><div class="t m0 xf h8 ya12 ff3 fs4 fc0 sc0 ls0 ws0">directiv<span class="_ _1"></span>e,<span class="_ _38"> </span>which instructs<span class="_ _6"> </span>the<span class="_ _6"> </span>assem<span class="_ _1"></span>bler to<span class="_ _6"> </span>activ<span class="_ _27"></span>ate<span class="_ _6"> </span>the<span class="_ _6"> </span><span class="ff5">.data<span class="_ _38"> </span></span>section.<span class="_ _7"> </span>Figure<span class="_ _6"> </span>4.5 illustrates<span class="_ _6"> </span>this<span class="_ _6"> </span>pro<span class="_ _5"></span>cess.</div><div class="t m0 xc h8 ya13 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _2"> </span>next<span class="_ _3"> </span>element<span class="_ _6"> </span>in<span class="_ _3"> </span>our<span class="_ _2"> </span>assembly<span class="_ _2"> </span>program<span class="_ _2"> </span>is<span class="_ _3"> </span>a<span class="_ _3"> </span>lab<span class="_ _5"></span>el<span class="_ _2"> </span>named<span class="_ _3"> </span>“<span class="ff5">msg:</span>”.<span class="_ _24"> </span>In<span class="_ _3"> </span>this<span class="_ _2"> </span>case,<span class="_ _3"> </span>the<span class="_ _3"> </span>assem<span class="_ _1"></span>bler<span class="_ _17"> </span><span class="ff7 fc1">1</span></div><div class="t m0 xf h8 ya14 ff3 fs4 fc0 sc0 ls0 ws0">registers the<span class="_ _6"> </span>symbol<span class="_ _6"> </span>named <span class="ff5">msg<span class="_ _6"> </span></span>at<span class="_ _38"> </span>the<span class="_ _6"> </span>symbol<span class="_ _6"> </span>table and<span class="_ _1c"> </span><span class="ff7 fc1">2<span class="_ _2a"> </span></span>asso<span class="_ _5"></span>ciates<span class="_ _6"> </span>it<span class="_ _6"> </span>with an<span class="_ _6"> </span>address<span class="_ _6"> </span>that represents</div><div class="t m0 xf h8 ya15 ff3 fs4 fc0 sc0 ls0 ws0">the current program lo<span class="_ _5"></span>cation,<span class="_ _38"> </span>which is indicated<span class="_ _38"> </span>by the active lo<span class="_ _5"></span>cation counter, <span class="ff8">i.e.</span>,<span class="_ _38"> </span>the<span class="_ _6"> </span>lo<span class="_ _5"></span>cation counter</div><div class="t m0 xf h8 ya16 ff3 fs4 fc0 sc0 ls0 ws0">of<span class="_ _2"> </span>the<span class="_ _2"> </span><span class="ff5">.data<span class="_ _6"> </span></span>section.<span class="_ _7"> </span>Figure<span class="_ _3"> </span>4.6<span class="_ _6"> </span>illustrates<span class="_ _2"> </span>this<span class="_ _2"> </span>pro<span class="_ _5"></span>cess.</div><div class="t m0 xc h8 ya17 ff3 fs4 fc0 sc0 ls0 ws0">The<span class="_ _7"> </span>next<span class="_ _7"> </span>element<span class="_ _34"> </span>in<span class="_ _7"> </span>our<span class="_ _7"> </span>assembly<span class="_ _34"> </span>program<span class="_ _7"> </span>is<span class="_ _7"> </span>the<span class="_ _7"> </span><span class="ff5">.ascii<span class="_ _4"> </span>&quot;hello&quot;<span class="_ _7"> </span></span>directive,<span class="_ _7"> </span>which<span class="_ _34"> </span>instructs<span class="_ _7"> </span>the</div><div class="t m0 xf h8 ya18 ff3 fs4 fc0 sc0 ls0 ws0">assem<span class="_ _1"></span>bler<span class="_ _34"> </span>to<span class="_ _34"> </span>add<span class="_ _34"> </span>a<span class="_ _34"> </span>string<span class="_ _7"> </span>to<span class="_ _34"> </span>the<span class="_ _34"> </span>active<span class="_ _b"> </span>section.<span class="_ _1b"> </span>Assuming<span class="_ _34"> </span>our<span class="_ _7"> </span>input<span class="_ _34"> </span>ﬁle<span class="_ _34"> </span>is<span class="_ _34"> </span>enco<span class="_ _5"></span>ded<span class="_ _34"> </span>using<span class="_ _7"> </span>the<span class="_ _34"> </span>ASCI<span class="_ _5"></span>I</div><div class="t m0 xf h8 ya19 ff3 fs4 fc0 sc0 ls0 ws0">standard,<span class="_ _7"> </span>the<span class="_ _7"> </span>assembler<span class="_ _1b"> </span><span class="ff7 fc1">1<span class="_ _0"> </span></span>encodes<span class="_ _7"> </span>the<span class="_ _7"> </span>string<span class="_ _7"> </span>as<span class="_ _7"> </span>a<span class="_ _7"> </span>sequence<span class="_ _7"> </span>of<span class="_ _7"> </span>bytes<span class="_ _b"> </span>based<span class="_ _7"> </span>on<span class="_ _7"> </span>the<span class="_ _7"> </span>ASCI<span class="_ _5"></span>I<span class="_ _7"> </span>standard,</div><div class="t m0 x20 h8 ya1a ff7 fs4 fc1 sc0 ls0 ws0">2<span class="_ _d"> </span><span class="ff3 fc0">add<span class="_ _b"> </span>these<span class="_ _b"> </span>bytes<span class="_ _3"> </span>to<span class="_ _b"> </span>the<span class="_ _b"> </span>next<span class="_ _b"> </span>av<span class="_ _9"></span>ailable<span class="_ _b"> </span>addresses<span class="_ _b"> </span>on<span class="_ _b"> </span>the<span class="_ _b"> </span>active<span class="_ _3"> </span>section,<span class="_ _b"> </span>and<span class="_ _39"> </span><span class="ff7 fc1">3<span class="_ _39"> </span></span>up<span class="_ _5"></span>dates<span class="_ _b"> </span>the<span class="_ _b"> </span>lo<span class="_ _5"></span>cation</span></div><div class="t m0 xf h8 ya1b ff3 fs4 fc0 sc0 ls0 ws0">coun<span class="_ _1"></span>ter.<span class="_ _7"> </span>Figure<span class="_ _2"> </span>4.7<span class="_ _2"> </span>illustrates<span class="_ _2"> </span>this<span class="_ _2"> </span>pro<span class="_ _5"></span>cess.</div><div class="t m0 xc h8 ya1c ff3 fs4 fc0 sc0 ls0 ws0">The next<span class="_ _a"> </span>element in<span class="_ _a"> </span>our assem<span class="_ _27"></span>bly program is a<span class="_ _a"> </span>lab<span class="_ _5"></span>el named “<span class="ff5">x:</span>”.<span class="_ _b"> </span>In this case, the<span class="_ _a"> </span>assembler<span class="_ _a"> </span>registers</div><div class="t m0 xf h8 ya1d ff3 fs4 fc0 sc0 ls0 ws0">the<span class="_ _a"> </span>symbol named<span class="_ _a"> </span><span class="ff5">x<span class="_ _8b"> </span></span>at the<span class="_ _a"> </span>symbol table<span class="_ _a"> </span>and associates it<span class="_ _a"> </span>the<span class="_ _a"> </span>address that<span class="_ _a"> </span>represents<span class="_ _a"> </span>the curren<span class="_ _27"></span>t program</div><div class="t m0 xf h8 ya1e ff3 fs4 fc0 sc0 ls0 ws0">lo<span class="_ _5"></span>cation,<span class="_ _6"> </span><span class="ff8">i.e.</span>,<span class="_ _2"> </span>the<span class="_ _2"> </span>address<span class="_ _2"> </span>in<span class="_ _2"> </span>the<span class="_ _2"> </span>active<span class="_ _6"> </span>lo<span class="_ _5"></span>cation<span class="_ _2"> </span>counter.</div><div class="t m0 x2b h1e ya1f fff fsd fc0 sc0 ls0 ws0">3</div><div class="t m0 xc h1f ya20 ff10 fse fc0 sc0 ls0 ws0">Strings<span class="_ _38"> </span>declared<span class="_ _38"> </span>in<span class="_ _38"> </span>C<span class="_ _38"> </span>programs<span class="_ _38"> </span>are<span class="_ _38"> </span>NULL-terminated<span class="_ _38"> </span>strings.</div><div class="t m0 x2c h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">Prin<span class="_ _1"></span>ted<span class="_ _2"> </span>v<span class="_ _1"></span>ersion<span class="_ _2"> </span>a<span class="_ _1"></span>v<span class="_ _27"></span>ailable<span class="_ _2"> </span>for<span class="_ _6"> </span>purchase<span class="_ _6"> </span>at<span class="_ _2"> </span>Amazon.com</div><div class="t m0 x2d h8 y143 ff3 fs4 fc0 sc0 ls0 ws0">F<span class="_ _9"></span>ree<span class="_ _2"> </span>online<span class="_ _6"> </span>version<span class="_ _6"> </span>at<span class="_ _2"> </span><span class="ff5">http://riscv-<span class="_ _22"></span>programming.org</span></div><div class="t m0 x2e h8 y144 ff3 fs4 fc0 sc0 ls0 ws0">(Generated<span class="_ _2"> </span>on<span class="_ _2"> </span>F<span class="_ _9"></span>ebruary<span class="_ _2"> </span>10,<span class="_ _6"> </span>2025)</div><div class="t m0 xb8 h8 y33 ff3 fs4 fc0 sc0 ls0 ws0">49</div><a class="l" href="#pf1e" data-dest-detail='[30,"XYZ",72,402.697,null]'><div class="d m1" style="border-style:none;position:absolute;left:266.928000px;bottom:420.077000px;width:14.723000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf3e" data-dest-detail='[62,"XYZ",87.243,119.611,null]'><div class="d m1" style="border-style:none;position:absolute;left:515.043000px;bottom:408.398000px;width:6.461000px;height:12.040000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf3b" data-dest-detail='[59,"XYZ",72,518.084,null]'><div class="d m1" style="border-style:none;position:absolute;left:187.320000px;bottom:304.109000px;width:14.723000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf3f" data-dest-detail='[63,"XYZ",72,739.005,null]'><div class="d m1" style="border-style:none;position:absolute;left:407.553000px;bottom:268.244000px;width:14.722000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf3f" data-dest-detail='[63,"XYZ",72,535.054,null]'><div class="d m1" style="border-style:none;position:absolute;left:197.557000px;bottom:220.423000px;width:14.722000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf3f" data-dest-detail='[63,"XYZ",72,331.102,null]'><div class="d m1" style="border-style:none;position:absolute;left:142.043000px;bottom:160.647000px;width:14.723000px;height:10.849000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://a.co/d/gUfKWsD"><div class="d m1" style="border-style:none;position:absolute;left:358.258000px;bottom:69.067000px;width:58.171000px;height:10.848000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://riscv-programming.org"><div class="d m1" style="border-style:none;position:absolute;left:271.722000px;bottom:56.835000px;width:148.940000px;height:11.125000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
